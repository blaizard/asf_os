<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OS: os_core.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">os_core.c File Reference</div>  </div>
</div>
<div class="contents">

<p>eeOS Core  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="compiler_8h_source.html">compiler.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="os__core_8h_source.html">os_core.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for os_core.c:</div>
<div class="dyncontent">
<div class="center"><img src="os__core_8c__incl.gif" border="0" usemap="#os__core_8c" alt=""/></div>
<map name="os__core_8c" id="os__core_8c">
</map>
</div>
</div>
<p><a href="os__core_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga8b77e662e12b6ec1437ac678246f4441">__os_process_disable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gadbbc7ac6ede447e46f3abd0b43cf7279">__os_process_enable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__process.html">os_process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__core_8c.html#a032d6f1843bb998a4162c8798bfb23d3">os_get_current_process</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current process.  <a href="#a032d6f1843bb998a4162c8798bfb23d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__public__api.html#gaf292791f2fa4380d7ad6069f1e206f9f">os_process_disable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable the execution of a process.  <a href="group__group__os__public__api.html#gaf292791f2fa4380d7ad6069f1e206f9f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__public__api.html#gae0e13a019be1d8bfa29bae998ad20def">os_process_enable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the execution a process.  <a href="group__group__os__public__api.html#gae0e13a019be1d8bfa29bae998ad20def"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__public__api.html#gaa0ef4301dd6970eb16d4afd6f66e5f67">os_process_is_enabled</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check wether a process is enabled or not.  <a href="group__group__os__public__api.html#gaa0ef4301dd6970eb16d4afd6f66e5f67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__process.html">os_process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__core_8c.html#a20076b02ccddcff5a14e46779c909b7b">os_scheduler</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function will define the rules to change the task.  <a href="#a20076b02ccddcff5a14e46779c909b7b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__public__api.html#ga02d2fa79b4b720c7906a7262740db686">os_yield</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the scheduler to switch to a new task that is ready to run. This function is useful for cooperative task swiching.  <a href="group__group__os__public__api.html#ga02d2fa79b4b720c7906a7262740db686"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__process.html">os_process</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1">os_app</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Context of the application task.  <a href="#a8ff8ca073f1700d9729f30ccff2df5c1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__process.html">os_process</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95">os_current_process</a> = &amp;<a class="el" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1">os_app</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Current process running.  <a href="#a1f5f2879440e238f354bea4539687c95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="os__core_8h.html#a38ef3fb720f7928704ee6e16452ff26e">os_tick_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__core_8c.html#ad4c76cdc3ec21a192769c94765993d05">tick_counter</a> = 0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tick counter.  <a href="#ad4c76cdc3ec21a192769c94765993d05"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>eeOS Core </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Blaise Lengrand (<a href="mailto:blaise.lengrand@gmail.com">blaise.lengrand@gmail.com</a>) </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.1 </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2011</dd></dl>
<h2><a class="anchor" id="eeos_license"></a>
License</h2>
<p><a class="el" href="group__group__os.html">eeOS</a> is provided in source form for FREE evaluation, for educational use or for peaceful research. If you plan on using <a class="el" href="group__group__os.html">eeOS</a> in a commercial product you need to contact the author to properly license its use in your product. The fact that the source is provided does NOT mean that you can use it without paying a licensing fee. </p>

<p>Definition in file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a032d6f1843bb998a4162c8798bfb23d3"></a><!-- doxytag: member="os_core.c::os_get_current_process" ref="a032d6f1843bb998a4162c8798bfb23d3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__process.html">os_process</a>* os_get_current_process </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the current process. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer on the current procress </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00076">76</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00042">os_current_process</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00086">__os_event_is_triggered()</a>, <a class="el" href="os__mutex_8c_source.html#l00047">os_mutex_lock()</a>, and <a class="el" href="os__mutex_8c_source.html#l00067">os_mutex_unlock()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a20076b02ccddcff5a14e46779c909b7b"></a><!-- doxytag: member="os_core.c::os_scheduler" ref="a20076b02ccddcff5a14e46779c909b7b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__process.html">os_process</a>* os_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function will define the rules to change the task. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The new task context </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00051">51</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00306">os_process::next</a>, <a class="el" href="os__core_8c_source.html#l00042">os_current_process</a>, <a class="el" href="os__interrupt_8h_source.html#l00157">OS_SCHEDULER_PRE_INTERRUPT_HOOK</a>, <a class="el" href="os__core_8h_source.html#l00313">os_process::priority</a>, and <a class="el" href="os__core_8h_source.html#l00316">os_process::priority_counter</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00613">os_switch_context_hook()</a>, and <a class="el" href="os__core_8h_source.html#l00594">os_switch_context_int_handler_hook()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">do</span> {
        <span class="comment">// Get the next process</span>
        <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a> = <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
        <span class="comment">// Check wether its priority counter is null</span>
        <span class="keywordflow">if</span> (!<a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>-&gt;<a class="code" href="structos__process.html#a9b69f90332f3297e0a041e36f1fe6dae" title="Use to manage the process priorities.">priority_counter</a>) {
            <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>-&gt;<a class="code" href="structos__process.html#a9b69f90332f3297e0a041e36f1fe6dae" title="Use to manage the process priorities.">priority_counter</a> =
                    <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>-&gt;<a class="code" href="structos__process.html#a888ee41cfca6bf77b78f1e873c64da49" title="Priority of the process.">priority</a>;
            <a class="code" href="os__interrupt_8h.html#ab8b4fd2fe2352c0a506d4885e0488635">OS_SCHEDULER_PRE_INTERRUPT_HOOK</a>();
            <span class="keywordflow">return</span> <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>;
        }
        <span class="comment">// Decrease the priority counter</span>
        <a class="code" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95" title="Current process running.">os_current_process</a>-&gt;<a class="code" href="structos__process.html#a9b69f90332f3297e0a041e36f1fe6dae" title="Use to manage the process priorities.">priority_counter</a>--;
    } <span class="keywordflow">while</span> (<span class="keyword">true</span>);
}
</pre></div>
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a8ff8ca073f1700d9729f30ccff2df5c1"></a><!-- doxytag: member="os_core.c::os_app" ref="a8ff8ca073f1700d9729f30ccff2df5c1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__process.html">os_process</a> <a class="el" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1">os_app</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    .next = &amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task.">os_app</a>,
    .<a class="code" href="structos__process.html#a155eb028fa3559e76417c2f92833e85a" title="The type of the process.">type</a> = <a class="code" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63aafac53bd86729c91ffec31ba13d4efcb" title="Application process.">OS_PROCESS_TYPE_APPLICATION</a>,

    .priority = <a class="code" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dca28064b7bfe69213addb689ef2b58e2fa">OS_PRIORITY_1</a>,
    .priority_counter = <a class="code" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dca28064b7bfe69213addb689ef2b58e2fa">OS_PRIORITY_1</a>,

}
</pre></div>
<p>Context of the application task. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This context is available only after the call of <a class="el" href="group__group__os__public__api.html#ga33dd8cccd647bfabacee2c2b9119939d">os_start</a> </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00031">31</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>Referenced by <a class="el" href="os__core_8c_source.html#l00134">__os_process_disable()</a>, and <a class="el" href="os__core_8h_source.html#l00639">__os_process_get_application()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f5f2879440e238f354bea4539687c95"></a><!-- doxytag: member="os_core.c::os_current_process" ref="a1f5f2879440e238f354bea4539687c95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__process.html">os_process</a>* <a class="el" href="os__core_8c.html#a1f5f2879440e238f354bea4539687c95">os_current_process</a> = &amp;<a class="el" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1">os_app</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Current process running. </p>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00042">42</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>Referenced by <a class="el" href="uc3__port_8c_source.html#l00196">_os_switch_context()</a>, <a class="el" href="uc3__port_8c_source.html#l00150">ISR()</a>, <a class="el" href="os__core_8c_source.html#l00076">os_get_current_process()</a>, <a class="el" href="os__core_8c_source.html#l00051">os_scheduler()</a>, <a class="el" href="os__task_8c_source.html#l00072">os_task_get_current()</a>, and <a class="el" href="os__event_8c_source.html#l00258">os_task_sleep()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c76cdc3ec21a192769c94765993d05"></a><!-- doxytag: member="os_core.c::tick_counter" ref="ad4c76cdc3ec21a192769c94765993d05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="os__core_8h.html#a38ef3fb720f7928704ee6e16452ff26e">os_tick_t</a> <a class="el" href="os__core_8c.html#ad4c76cdc3ec21a192769c94765993d05">tick_counter</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tick counter. </p>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00047">47</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00594">os_switch_context_int_handler_hook()</a>, and <a class="el" href="os__task_8c_source.html#l00018">os_task_delay()</a>.</p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 15 2011 13:05:47 for OS by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
