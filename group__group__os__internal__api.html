<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>eeOS (Embedded Event-driven Operating System): Internal API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Internal API<br/>
<small>
[<a class="el" href="group__group__os.html">eeOS</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Internal API. These functions should not be used by the user.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaa535e9a952f86255edc6dab13a05616b">__os_debug_trace_log</a> (enum <a class="el" href="os__debug_8h.html#a392e1d4db5e097ef4a5b996f6886e8e5">os_debug_trace_event</a> event, <a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called to log a trace entry.  <a href="#gaa535e9a952f86255edc6dab13a05616b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gac2522f48df0e1d265c513988fae058c9">__os_event_create</a> (struct <a class="el" href="structos__event.html">os_event</a> *event, const struct <a class="el" href="structos__event__descriptor.html">os_event_descriptor</a> *descriptor, <a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new event.  <a href="#gac2522f48df0e1d265c513988fae058c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7">os_event_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga6435dee879fc99935a12f580005794d2">__os_event_custom_function_handler</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc, <a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal handler for the boolean function.  <a href="#ga6435dee879fc99935a12f580005794d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__queue__event.html">os_queue_event</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga7957786166976c56c27b829e351dfbfa">__os_event_get_queue</a> (struct <a class="el" href="structos__event.html">os_event</a> *event)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the <a class="el" href="structos__queue__event.html">os_queue_event</a> pointer associated with an event.  <a href="#ga7957786166976c56c27b829e351dfbfa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__queue__event.html">os_queue_event</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga7c2dafc11109193b7d8808436d5c327f">__os_event_get_queue_ptr</a> (struct <a class="el" href="structos__event.html">os_event</a> *event)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the pointer on the variable that hold the <a class="el" href="structos__queue__event.html">os_queue_event</a> structure associated with an event.  <a href="#ga7c2dafc11109193b7d8808436d5c327f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga3a58c13de654c84997a32d91f731072c">__os_event_is_empty</a> (struct <a class="el" href="structos__event.html">os_event</a> *event)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function test a event structure and notifies if it has any remaining process in its queue.  <a href="#ga3a58c13de654c84997a32d91f731072c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga9c0d0da11a181e77c0c4f71f8bea1b1f">__os_event_is_enabled</a> (struct <a class="el" href="structos__event.html">os_event</a> *event)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if an event is enabled, in other word, test if it is in the active event list.  <a href="#ga9c0d0da11a181e77c0c4f71f8bea1b1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7">os_event_status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga316756c4f8e82d155a7109db3ce34ab4">__os_event_mutex_is_triggered</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc, <a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Declaration of the event trigger function for a mutex.  <a href="#ga316756c4f8e82d155a7109db3ce34ab4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga86ff7b0af2c06c7a1468e8e748d6d914">__os_event_register</a> (struct <a class="el" href="structos__event.html">os_event</a> *event, struct <a class="el" href="structos__queue__event.html">os_queue_event</a> *queue_elt, struct <a class="el" href="structos__process.html">os_process</a> *proc, struct <a class="el" href="structos__event.html">os_event</a> **event_triggered)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Associate a process with an event and enable the event.  <a href="#ga86ff7b0af2c06c7a1468e8e748d6d914"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga550458f90f51829dfeab965a4b06a3b5">__os_event_scheduler</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Event scheduler.  <a href="#ga550458f90f51829dfeab965a4b06a3b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__interrupt.html">os_interrupt</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gae0309d7c3241bdf4cbff8eb4684f6ed3">__os_interrupt_from_process</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the interrupt associated with a process.  <a href="#gae0309d7c3241bdf4cbff8eb4684f6ed3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga597f874ef1e4f8a7fe3a3f5969f49b54">__os_interrupt_get_process</a> (struct <a class="el" href="structos__interrupt.html">os_interrupt</a> *interrupt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the interrupt process.  <a href="#ga597f874ef1e4f8a7fe3a3f5969f49b54"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga0bb8d2ee09ad338228d8d32a90846891">__os_interrupt_handler</a> (<a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> args)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Software interrupt handler.  <a href="#ga0bb8d2ee09ad338228d8d32a90846891"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga9cac795e0d66983e9185e28d6349d8fd">__os_process_application_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable the application process.  <a href="#ga9cac795e0d66983e9185e28d6349d8fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gae5be3214104fb39d793100cca34689b5">__os_process_application_enable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the application process.  <a href="#gae5be3214104fb39d793100cca34689b5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga0ae7ba755012c168f5f8244d5122fdbc">__os_process_create</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc, <a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a> sp, enum <a class="el" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63">os_process_type</a> type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes a process.  <a href="#ga0ae7ba755012c168f5f8244d5122fdbc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga8b77e662e12b6ec1437ac678246f4441">__os_process_disable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable the execution of a process.  <a href="#ga8b77e662e12b6ec1437ac678246f4441"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaea1eec8813a3258a94fc0ec1989a3ecd">__os_process_disable_naked</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gadbbc7ac6ede447e46f3abd0b43cf7279">__os_process_enable</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the execution a process.  <a href="#gadbbc7ac6ede447e46f3abd0b43cf7279"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga7f69e0876ae2707bddb35a3c8d270330">__os_process_enable_naked</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gac27975b4e6ef88d40949d7aedca64ad1">__os_process_event_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the event process If the event process is enabled, the application process will be disabled as they share the same process.  <a href="#gac27975b4e6ef88d40949d7aedca64ad1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga30477cfc382c7e5f54fbc88c1eb1ca0a">__os_process_event_enable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the event process If the event process is enabled, the application process will be disabled as they share the same process.  <a href="#ga30477cfc382c7e5f54fbc88c1eb1ca0a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gae6ebea205cb5febe50abc3a3dcd1ed32">__os_process_get_application</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the application process.  <a href="#gae6ebea205cb5febe50abc3a3dcd1ed32"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gad47b7f0e4e7fb6ca3b9337f27b58e4ce">__os_process_get_current</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current process.  <a href="#gad47b7f0e4e7fb6ca3b9337f27b58e4ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dc">os_priority</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaf8f901371c700984e8b4a80cf732902e">__os_process_get_priority</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the priority of a process.  <a href="#gaf8f901371c700984e8b4a80cf732902e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gac86c447472c8c847e7c9aa3bd7c67e13">__os_process_is_application</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if a process is the application process.  <a href="#gac86c447472c8c847e7c9aa3bd7c67e13"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaf164be52a80269392cd82f1845059058">__os_process_is_enabled</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check wether a process is active or not.  <a href="#gaf164be52a80269392cd82f1845059058"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga78b8cd7a259264c99b9fd11d62c62c35">__os_process_is_event</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if a process is the event scheduler.  <a href="#ga78b8cd7a259264c99b9fd11d62c62c35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga0270e506339646e6caffde26e8d7eb07">__os_process_is_interrupt</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if a process is a software interrupt.  <a href="#ga0270e506339646e6caffde26e8d7eb07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gabd275b0584fb99f4ab8d4b502f2aa204">__os_process_is_pending</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check wether a process is enabled or not.  <a href="#gabd275b0584fb99f4ab8d4b502f2aa204"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaccdbaa2aad69b06cd56fd72dba37732b">__os_process_is_task</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if a process is a task.  <a href="#gaccdbaa2aad69b06cd56fd72dba37732b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga18198e84639c9f66f72900c76bb2fefb">__os_process_set_priority</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc, enum <a class="el" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dc">os_priority</a> priority)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the priority of a process.  <a href="#ga18198e84639c9f66f72900c76bb2fefb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaf4d96602eddb7c6a2ce5364b23dda921">__os_process_sleep</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc, struct <a class="el" href="structos__queue__event.html">os_queue_event</a> *queue_elt, int nb_events,...)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic function to send a processus to sleep. The process can be waken up by one or more events passed in parameter.  <a href="#gaf4d96602eddb7c6a2ce5364b23dda921"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gabfa157529174d1ff2b9df08294b8059d">__os_scheduler</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function will define the rules to change the task.  <a href="#gabfa157529174d1ff2b9df08294b8059d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gaabadca5512257f087d9a0c1018e21bba">__os_switch_context_hook</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function must be called inside the<a class="el" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5">os_switch_context</a> function in order to switch process context.  <a href="#gaabadca5512257f087d9a0c1018e21bba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__task.html">os_task</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#ga9af88f94162d05e65151c9f93c27319d">__os_task_from_process</a> (struct <a class="el" href="structos__process.html">os_process</a> *proc)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the task associated with a process.  <a href="#ga9af88f94162d05e65151c9f93c27319d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__os__internal__api.html#gafb21284eaa777fe2d2b2352fabff3566">__os_task_get_process</a> (struct <a class="el" href="structos__task.html">os_task</a> *task)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the task process.  <a href="#gafb21284eaa777fe2d2b2352fabff3566"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Internal API. These functions should not be used by the user. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaa535e9a952f86255edc6dab13a05616b"></a><!-- doxytag: member="os_debug.h::__os_debug_trace_log" ref="gaa535e9a952f86255edc6dab13a05616b" args="(enum os_debug_trace_event event, os_ptr_t data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_debug_trace_log </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="os__debug_8h.html#a392e1d4db5e097ef4a5b996f6886e8e5">os_debug_trace_event</a>&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function is called to log a trace entry. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event identifier to be logged </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>The data associated with the trace </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><a class="el" href="group__group__os__public__api.html#ga42fc6bd617d92654e480bffb13c5b2d9">os_debug_start_trace</a> must have been called first. </dd></dl>

<p>Definition at line <a class="el" href="os__debug_8c_source.html#l00030">30</a> of file <a class="el" href="os__debug_8c_source.html">os_debug.c</a>.</p>

<p>References <a class="el" href="os__debug_8h_source.html#l00169">os_trace::data</a>, <a class="el" href="os__debug_8h_source.html#l00167">os_trace::event</a>, <a class="el" href="os__debug_8c_source.html#l00019">os_debug_trace_flag</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__port_8h_source.html#l00073">os_is_critical()</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, <a class="el" href="os__port_8h_source.html#l00101">os_read_cycle_counter()</a>, and <a class="el" href="os__debug_8h_source.html#l00165">os_trace::time</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* The following code is only activated if the trace is enabled */</span>
    <span class="keywordflow">if</span> (<a class="code" href="os__debug_8c.html#a2240fe345650563e1257b544681aeac8" title="Flag set to true if the trace is activated, false otherwise.">os_debug_trace_flag</a>) {
        <span class="comment">/* Save the critical region status */</span>
        <span class="keywordtype">bool</span> is_critical = <a class="code" href="group__os__port__group.html#ga3409b487193b6c7fd877bc2f9c5b218a" title="Indicates if the CPU is currently running inside a critical region.">os_is_critical</a>();
        <span class="comment">/* The trace log is a shared variable so this snippet of code</span>
<span class="comment">         * must run as in a critical region.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (!is_critical) {
            <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
        }
        <span class="comment">/* Fill in the trace information */</span>
        <a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a>-&gt;<a class="code" href="structos__trace.html#a3f31818648e14ffe43576307243271fa" title="The time (in cycle counter) when the trace has been taken.">time</a> = <a class="code" href="os__port_8h.html#af40263235b72b196ce647659a44c0b34">os_read_cycle_counter</a>();
        <a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a>-&gt;<a class="code" href="structos__trace.html#a0458db41f2eb141ab409ecc4befcce00" title="The event identifier associated with this trace.">event</a> = event;
        <a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a>-&gt;<a class="code" href="structos__trace.html#a95702e5dbec32d2ec165378b82ff035e" title="Data associated with this trace.">data</a> = data;
        <span class="comment">/* Increase the trace pointer. The trace is saved in a circular</span>
<span class="comment">         * buffer, handle the wrapping if any.</span>
<span class="comment">         */</span>
        <a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a>++;
        <span class="comment">/* If the new trace pointer is equal to the last trace address,</span>
<span class="comment">         * we need to wrap.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (<a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a> == <a class="code" href="os__debug_8c.html#af1f9b4e8239f08078fc7db299685e5a7" title="Trace buffer ending point.">os_debug_trace_end</a>) {
            <a class="code" href="os__debug_8c.html#a66fb2b328a2f2e40d13a1fa9cbfacd03" title="Trace pointer, to keep track of the current trace entry.">os_debug_trace_ptr</a> = <a class="code" href="os__debug_8c.html#abe9d38ab3c8b8460ec427c7fadcbcbeb" title="Trace buffer starting point.">os_debug_trace_start</a>;
        }
        <span class="comment">/* Leave the critical region if the rest of the code does not</span>
<span class="comment">         * requires to run inside a critical code region.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (!is_critical) {
            <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac2522f48df0e1d265c513988fae058c9"></a><!-- doxytag: member="os_event.h::__os_event_create" ref="gac2522f48df0e1d265c513988fae058c9" args="(struct os_event *event, const struct os_event_descriptor *descriptor, os_ptr_t args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_event_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structos__event__descriptor.html">os_event_descriptor</a> *&nbsp;</td>
          <td class="paramname"> <em>descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>A non-initialized event structure to hold the context of this event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>descriptor</em>&nbsp;</td><td>The event description structure which defines the type of event to be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>Argument which will be passed to the event descriptor functions. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="os__event_8c_source.html#l00025">25</a> of file <a class="el" href="os__event_8c_source.html">os_event.c</a>.</p>

<p>References <a class="el" href="os__event_8h_source.html#l00101">os_event_descriptor::is_triggered</a>, <a class="el" href="os__event_8h_source.html#l00087">os_event_descriptor::sort</a>, and <a class="el" href="os__event_8h_source.html#l00094">os_event_descriptor::start</a>.</p>

<p>Referenced by <a class="el" href="os__event_8h_source.html#l00260">os_event_create_from_function()</a>, <a class="el" href="os__mutex_8h_source.html#l00070">os_mutex_create_event()</a>, and <a class="el" href="os__semaphore_8h_source.html#l00106">os_semaphore_create_event()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* Fill the event structure */</span>
    <span class="keyword">event</span>-&gt;desc.sort = descriptor-&gt;<a class="code" href="structos__event__descriptor.html#a3b1022c2b21c94342ad64e55c8aab53c" title="Sorting function. This function compare 2 processes. The following helper functions are available:os_...">sort</a>;
    <span class="keyword">event</span>-&gt;desc.start = descriptor-&gt;<a class="code" href="structos__event__descriptor.html#ad85e40eda14b115e5688e31826d100e4" title="This function will handle the setup of the event. For example, if the event is a timer, the timer will start to run after the call of this function.">start</a>;
    <span class="keyword">event</span>-&gt;desc.is_triggered = descriptor-&gt;<a class="code" href="structos__event__descriptor.html#a1de34d4414099df02afe3b48533ae218" title="Check the status of an event.">is_triggered</a>;
    <span class="comment">/* Associate arguments to the event */</span>
    <span class="keyword">event</span>-&gt;args = args;
    <span class="comment">/* Mark this event as disabled */</span>
    <span class="keyword">event</span>-&gt;queue.next = NULL;
    <span class="keyword">event</span>-&gt;queue.prev = NULL;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga6435dee879fc99935a12f580005794d2"></a><!-- doxytag: member="os_event.h::__os_event_custom_function_handler" ref="ga6435dee879fc99935a12f580005794d2" args="(struct os_process *proc, os_ptr_t args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7">os_event_status</a> __os_event_custom_function_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal handler for the boolean function. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>Process associated to the event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>Extra arguments to pass to this function. Arguments are a pointer of type <a class="el" href="struct____os__event__custom__function__args.html">__os_event_custom_function_args</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The status of the trigger function </dd></dl>

<p>Definition at line <a class="el" href="os__event_8c_source.html#l00259">259</a> of file <a class="el" href="os__event_8c_source.html">os_event.c</a>.</p>

<p>References <a class="el" href="os__event_8h_source.html#l00147">__os_event_custom_function_args::args</a>, and <a class="el" href="os__event_8h_source.html#l00145">__os_event_custom_function_args::trigger</a>.</p>

<p>Referenced by <a class="el" href="os__event_8h_source.html#l00260">os_event_create_from_function()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* The pointer is cast to a structure of type</span>
<span class="comment">     * __os_event_custom_function_args</span>
<span class="comment">     */</span>
    <span class="keyword">struct </span><a class="code" href="struct____os__event__custom__function__args.html" title="Internal structure to fit a boolean function in a event.">__os_event_custom_function_args</a> *custom_args =
            (<span class="keyword">struct </span><a class="code" href="struct____os__event__custom__function__args.html" title="Internal structure to fit a boolean function in a event.">__os_event_custom_function_args</a> *) <a class="code" href="struct____os__event__custom__function__args.html#adcec3f261ea3bcc1f3fa822631a8a74b">args</a>;
    <span class="comment">/* Call the trigger function to test if the event has been triggered */</span>
    <span class="keywordflow">if</span> (custom_args-&gt;<a class="code" href="struct____os__event__custom__function__args.html#a0708b469fb2c82d428664d8383e90461">trigger</a>(custom_args-&gt;<a class="code" href="struct____os__event__custom__function__args.html#adcec3f261ea3bcc1f3fa822631a8a74b">args</a>)) {
        <span class="comment">/* If yes, continue looking */</span>
        <span class="keywordflow">return</span> OS_EVENT_OK_CONTINUE;
    }
    <span class="comment">/* If not, stop */</span>
    <span class="keywordflow">return</span> OS_EVENT_NONE;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7957786166976c56c27b829e351dfbfa"></a><!-- doxytag: member="os_event.h::__os_event_get_queue" ref="ga7957786166976c56c27b829e351dfbfa" args="(struct os_event *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__queue__event.html">os_queue_event</a>* __os_event_get_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the <a class="el" href="structos__queue__event.html">os_queue_event</a> pointer associated with an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event from which we want to get the structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The <a class="el" href="structos__queue__event.html">os_queue_event</a> pointer, or NULL if no processes are associated with this event </dd></dl>

<p>Definition at line <a class="el" href="os__event_8h_source.html#l00229">229</a> of file <a class="el" href="os__event_8h_source.html">os_event.h</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                                  {
    <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structos__queue__event.html" title="Event queue structure definition (see OS_QUEUE_DOUBLY_DEFINE for more details). This structure is use...">os_queue_event</a> *) <span class="keyword">event</span>-&gt;queue.next;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7c2dafc11109193b7d8808436d5c327f"></a><!-- doxytag: member="os_event.h::__os_event_get_queue_ptr" ref="ga7c2dafc11109193b7d8808436d5c327f" args="(struct os_event *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__queue__event.html">os_queue_event</a>** __os_event_get_queue_ptr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the pointer on the variable that hold the <a class="el" href="structos__queue__event.html">os_queue_event</a> structure associated with an event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event we need to get data from </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer on the variable which holds the <a class="el" href="structos__queue__event.html">os_queue_event</a> structure associated with this event </dd></dl>

<p>Definition at line <a class="el" href="os__event_8h_source.html#l00240">240</a> of file <a class="el" href="os__event_8h_source.html">os_event.h</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00100">__os_event_register()</a>, and <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                                       {
    <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structos__queue__event.html" title="Event queue structure definition (see OS_QUEUE_DOUBLY_DEFINE for more details). This structure is use...">os_queue_event</a> **) &amp;<span class="keyword">event</span>-&gt;queue.next;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga3a58c13de654c84997a32d91f731072c"></a><!-- doxytag: member="os_event.h::__os_event_is_empty" ref="ga3a58c13de654c84997a32d91f731072c" args="(struct os_event *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_event_is_empty </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function test a event structure and notifies if it has any remaining process in its queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event to be tested </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if there are no process in the queue, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="os__event_8h_source.html#l00184">184</a> of file <a class="el" href="os__event_8h_source.html">os_event.h</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                               {
    <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) !(<span class="keyword">event</span>-&gt;queue.next);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9c0d0da11a181e77c0c4f71f8bea1b1f"></a><!-- doxytag: member="os_event.h::__os_event_is_enabled" ref="ga9c0d0da11a181e77c0c4f71f8bea1b1f" args="(struct os_event *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_event_is_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if an event is enabled, in other word, test if it is in the active event list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the event is enabled, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="os__event_8h_source.html#l00194">194</a> of file <a class="el" href="os__event_8h_source.html">os_event.h</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00100">__os_event_register()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                 {
    <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) (<span class="keyword">event</span>-&gt;queue.next);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga316756c4f8e82d155a7109db3ce34ab4"></a><!-- doxytag: member="os_mutex.h::__os_event_mutex_is_triggered" ref="ga316756c4f8e82d155a7109db3ce34ab4" args="(struct os_process *proc, os_ptr_t args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7">os_event_status</a> __os_event_mutex_is_triggered </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>args</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declaration of the event trigger function for a mutex. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process associated with this event </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>Extra arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returned if the event triggered or not </dd></dl>

<p>Definition at line <a class="el" href="os__mutex_8c_source.html#l00017">17</a> of file <a class="el" href="os__mutex_8c_source.html">os_mutex.c</a>.</p>

<p>References <a class="el" href="os__mutex_8h_source.html#l00025">os_mutex::is_locked</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__port_8h_source.html#l00073">os_is_critical()</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, <a class="el" href="os__mutex_8h_source.html#l00028">os_mutex::process</a>, and <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>.</p>

<p>Referenced by <a class="el" href="os__mutex_8h_source.html#l00070">os_mutex_create_event()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* Output status of the event */</span>
    <span class="keyword">enum</span> <a class="code" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7" title="Status returned by an event.">os_event_status</a> status = OS_EVENT_NONE;
    <span class="comment">/* Cast the arguments to a \ref os_mutex structure */</span>
    <span class="keyword">struct </span><a class="code" href="structos__mutex.html" title="Mutex Structure.">os_mutex</a> *mutex = (<span class="keyword">struct </span><a class="code" href="structos__mutex.html" title="Mutex Structure.">os_mutex</a> *) args;
    <span class="comment">/* Save the critical region status */</span>
    <span class="keywordtype">bool</span> is_critical = <a class="code" href="group__os__port__group.html#ga3409b487193b6c7fd877bc2f9c5b218a" title="Indicates if the CPU is currently running inside a critical region.">os_is_critical</a>();

    <span class="comment">/* Enter in a critical region if not already in */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
    }
    <span class="comment">/* Test if the mutex is not locked */</span>
    <span class="keywordflow">if</span> (!mutex-&gt;<a class="code" href="structos__mutex.html#a61b7d5b806c5f0570d70932696da2eb1" title="Defines if a mutex is locked or not.">is_locked</a>) {
        <span class="comment">/* lock it */</span>
        mutex-&gt;<a class="code" href="structos__mutex.html#a61b7d5b806c5f0570d70932696da2eb1" title="Defines if a mutex is locked or not.">is_locked</a> = <span class="keyword">true</span>;
        <span class="comment">/* Associate a process with this mutex */</span>
        mutex-&gt;<a class="code" href="structos__mutex.html#a2660a819bc333c5d9b2c0ced67c5a921" title="The process which locked the mutex.">process</a> = proc;
        <span class="comment">/* Set the status of this event to triggered */</span>
        status = OS_EVENT_OK_STOP;
    }
    <span class="comment">/* Leave the critical section */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
    }

    <span class="comment">/* Return the event status */</span>
    <span class="keywordflow">return</span> status;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga86ff7b0af2c06c7a1468e8e748d6d914"></a><!-- doxytag: member="os_event.h::__os_event_register" ref="ga86ff7b0af2c06c7a1468e8e748d6d914" args="(struct os_event *event, struct os_queue_event *queue_elt, struct os_process *proc, struct os_event **event_triggered)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_event_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> *&nbsp;</td>
          <td class="paramname"> <em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structos__queue__event.html">os_queue_event</a> *&nbsp;</td>
          <td class="paramname"> <em>queue_elt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structos__event.html">os_event</a> **&nbsp;</td>
          <td class="paramname"> <em>event_triggered</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Associate a process with an event and enable the event. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>event</em>&nbsp;</td><td>The event to receive the process </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>queue_elt</em>&nbsp;</td><td>A unitialized queue structure used to hold the process in the queue. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to add </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>event_triggered</em>&nbsp;</td><td>A pointer to update which will reflect the event that has been triggered </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga550458f90f51829dfeab965a4b06a3b5"></a><!-- doxytag: member="os_event.h::__os_event_scheduler" ref="ga550458f90f51829dfeab965a4b06a3b5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_event_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Event scheduler. </p>

<p>Definition at line <a class="el" href="os__event_8c_source.html#l00141">141</a> of file <a class="el" href="os__event_8c_source.html">os_event.c</a>.</p>

<p>References <a class="el" href="os__event_8h_source.html#l00229">__os_event_get_queue()</a>, <a class="el" href="os__event_8h_source.html#l00240">__os_event_get_queue_ptr()</a>, <a class="el" href="os__event_8h_source.html#l00184">__os_event_is_empty()</a>, <a class="el" href="os__event_8c_source.html#l00043">__os_event_pop()</a>, <a class="el" href="os__core_8c_source.html#l00118">__os_process_enable_naked()</a>, <a class="el" href="os__core_8h_source.html#l00748">__os_process_event_disable()</a>, <a class="el" href="os__core_8h_source.html#l00636">__os_process_is_pending()</a>, <a class="el" href="os__event_8h_source.html#l00138">os_event::args</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__event_8h_source.html#l00060">OS_EVENT_NONE</a>, <a class="el" href="os__event_8h_source.html#l00072">OS_EVENT_OK_CONTINUE</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, and <a class="el" href="os__port_8h_source.html#l00085">os_switch_context</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00819">os_start()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* To hold the current event to process */</span>
    <span class="keyword">struct </span><a class="code" href="structos__event.html" title="Event structure.">os_event</a> *event;
    <span class="comment">/* Status of the current event */</span>
    <span class="keyword">enum</span> <a class="code" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7" title="Status returned by an event.">os_event_status</a> status = OS_EVENT_NONE;

    <span class="comment">/* All the following cannot be interrupted since manupulating the</span>
<span class="comment">     * active event list is critical.</span>
<span class="comment">     */</span>
    <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();

    <span class="comment">/* Start with the first event to process */</span>
    <span class="keyword">event</span> = <a class="code" href="os__event_8c.html#abe4ec0823a02f9e0d59220c84c0eb6c9" title="Active event list. This pointer points on the 1rst active event registered in the evetn chain list...">__os_current_event</a>;

    <span class="comment">/* If no events, disable the event process */</span>
    <span class="keywordflow">if</span> (!event) {
        <span class="comment">/* Disable the event process */</span>
        <a class="code" href="group__group__os__internal__api.html#gac27975b4e6ef88d40949d7aedca64ad1" title="Enable the event process If the event process is enabled, the application process will be disabled as...">__os_process_event_disable</a>();
    }

    <span class="comment">/* Loop inside the active event list */</span>
    <span class="keywordflow">while</span> (event) {
        <span class="comment">/* Loop until the status of the current event is &quot;stop&quot; */</span>
        <span class="keywordflow">do</span> {
            <span class="comment">/* If the process queue of the current event is not</span>
<span class="comment">             * empty</span>
<span class="comment">             */</span>
            <span class="keywordflow">if</span> (!<a class="code" href="group__group__os__internal__api.html#ga3a58c13de654c84997a32d91f731072c" title="This function test a event structure and notifies if it has any remaining process in its queue...">__os_event_is_empty</a>(event)) {
                <span class="keyword">struct </span><a class="code" href="structos__queue__event.html" title="Event queue structure definition (see OS_QUEUE_DOUBLY_DEFINE for more details). This structure is use...">os_queue_event</a> *queue_elt;
                <span class="comment">/* Get the first process associated with the</span>
<span class="comment">                 * current event</span>
<span class="comment">                 */</span>
                queue_elt = os_queue_event_head(
                        <a class="code" href="group__group__os__internal__api.html#ga7957786166976c56c27b829e351dfbfa" title="Get the os_queue_event pointer associated with an event.">__os_event_get_queue</a>(event));
                <span class="comment">/* Make sure the process is in pending state */</span>
                <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#gabd275b0584fb99f4ab8d4b502f2aa204" title="Check wether a process is enabled or not.">__os_process_is_pending</a>(queue_elt-&gt;proc)) {
                    <span class="comment">/* Check if the event has been triggered</span>
<span class="comment">                     */</span>
                    status = <span class="keyword">event</span>-&gt;desc.is_triggered(
                            queue_elt-&gt;proc,
                            event-&gt;<a class="code" href="structos__event.html#a49b42e531680051af689cf09dffedb5b" title="Extra arguments used to define this event.">args</a>);
                    <span class="comment">/* If the event has triggered */</span>
                    <span class="keywordflow">if</span> (status != <a class="code" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7a76b2ac0d27c3b75ead74e86bad9ab3e4" title="No event has occured.">OS_EVENT_NONE</a>) {
                        <span class="keyword">struct </span><a class="code" href="structos__queue__event.html" title="Event queue structure definition (see OS_QUEUE_DOUBLY_DEFINE for more details). This structure is use...">os_queue_event</a> *current_elt;
                        <span class="comment">/* Update the event feedback</span>
<span class="comment">                         * variable</span>
<span class="comment">                         */</span>
                        *queue_elt-&gt;event_triggered =
                                event;
                        <span class="comment">/* Remove the process from the</span>
<span class="comment">                         * event list</span>
<span class="comment">                         */</span>
                        os_queue_event_pop(
                                <a class="code" href="group__group__os__internal__api.html#ga7c2dafc11109193b7d8808436d5c327f" title="Get the pointer on the variable that hold the os_queue_event structure associated with an event...">__os_event_get_queue_ptr</a>(event));
                        <span class="comment">/* Activate the process */</span>
                        <a class="code" href="group__group__os__internal__api.html#ga7f69e0876ae2707bddb35a3c8d270330">__os_process_enable_naked</a>(queue_elt-&gt;proc);
                        <span class="comment">/* Garbage collect, remove the other</span>
<span class="comment">                         * queued entries associated to this process</span>
<span class="comment">                         */</span>
                        current_elt = queue_elt-&gt;relation;
                        <span class="comment">/* Loop through the other queued entries</span>
<span class="comment">                         * assicoated with this process and remove</span>
<span class="comment">                         * them</span>
<span class="comment">                         */</span>
                        <span class="keywordflow">while</span> (current_elt != queue_elt) {
                            os_queue_event_remove(current_elt);
                            current_elt = current_elt-&gt;relation;
                        }
                    }
                }
                <span class="comment">/* If a process is not pending, pop this process out</span>
<span class="comment">                 * of the event list. This should never happen.</span>
<span class="comment">                 */</span>
                <span class="keywordflow">else</span> {
                    <span class="comment">// while (true);</span>
                    <span class="comment">/* Remove the not pending process from</span>
<span class="comment">                     * the list.</span>
<span class="comment">                     */</span>
                    os_queue_event_pop(<a class="code" href="group__group__os__internal__api.html#ga7c2dafc11109193b7d8808436d5c327f" title="Get the pointer on the variable that hold the os_queue_event structure associated with an event...">__os_event_get_queue_ptr</a>(event));
                    <span class="comment">/* Continue processing the next process</span>
<span class="comment">                     * in the list.</span>
<span class="comment">                     */</span>
                    status = OS_EVENT_OK_CONTINUE;
                }
            }

        <span class="comment">/* Loop until the status is set to &quot;continue&quot; */</span>
        } <span class="keywordflow">while</span> (status == <a class="code" href="os__event_8h.html#a9658f0b4244c28dcd0efdcdbb2109fd7acecf03b8374d2a7cceb9c15d7ecf4ddc" title="An event has been triggered for this process. If another process is sharing the same event...">OS_EVENT_OK_CONTINUE</a>);
        <span class="comment">/* Get the next active event */</span>
        <span class="keyword">event</span> = <span class="keyword">event</span>-&gt;next;
    }

    <span class="comment">/* Start with the first event to process */</span>
    <span class="keyword">event</span> = <a class="code" href="os__event_8c.html#abe4ec0823a02f9e0d59220c84c0eb6c9" title="Active event list. This pointer points on the 1rst active event registered in the evetn chain list...">__os_current_event</a>;
    <span class="comment">/* Garbage collector, test if there are empty events, if so remove them</span>
<span class="comment">     */</span>
    <span class="keywordflow">while</span> (event) {
        <span class="comment">/* If the process queue of the current event is empty,</span>
<span class="comment">         * remove this event from the active event list.</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#ga3a58c13de654c84997a32d91f731072c" title="This function test a event structure and notifies if it has any remaining process in its queue...">__os_event_is_empty</a>(event)) {
            <span class="comment">/* Change the status to exit the main loop */</span>
            status = OS_EVENT_NONE;
            <span class="comment">/* Remove this event from the active event list</span>
<span class="comment">             */</span>
            <a class="code" href="os__event_8c.html#acff13c8a0d6d97ae1629992028988138" title="Remove an event from the active event list.">__os_event_pop</a>(event);
        }
        <span class="keyword">event</span> = <span class="keyword">event</span>-&gt;next;
    }

    <span class="comment">/* Manually call the scheduler to schedule the next process */</span>
    <a class="code" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5" title="Context switch for a process.  Function used to schedule and switch between the processes.  This function will handle the return from a softwre interrupt. Therefore it can be optimized to bypass the saving context part IF an interrupt is running.">os_switch_context</a>(<span class="keyword">false</span>);

    <span class="comment">/* Leave the critical area */</span>
    <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae0309d7c3241bdf4cbff8eb4684f6ed3"></a><!-- doxytag: member="os_interrupt.h::__os_interrupt_from_process" ref="gae0309d7c3241bdf4cbff8eb4684f6ed3" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__interrupt.html">os_interrupt</a>* __os_interrupt_from_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the interrupt associated with a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>the process </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The interrupt pointer </dd></dl>

<p>Definition at line <a class="el" href="os__interrupt_8h_source.html#l00093">93</a> of file <a class="el" href="os__interrupt_8h_source.html">os_interrupt.h</a>.</p>

<p>References <a class="el" href="os__interrupt_8h_source.html#l00077">os_interrupt::core</a>, and <a class="el" href="os__core_8h_source.html#l00309">OS_CONTAINER_OF</a>.</p>

<p><div class="fragment"><pre class="fragment">                                 {
    <span class="keywordflow">return</span> <a class="code" href="group__group__os__public__api.html#ga52cb8c03bd5a4fc2bd2eb0015e587afa" title="Retrieve the pointer of the containing structure of the ptr element.">OS_CONTAINER_OF</a>(proc, <span class="keyword">struct</span> <a class="code" href="structos__interrupt.html" title="Software interrupt structure.">os_interrupt</a>, core);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga597f874ef1e4f8a7fe3a3f5969f49b54"></a><!-- doxytag: member="os_interrupt.h::__os_interrupt_get_process" ref="ga597f874ef1e4f8a7fe3a3f5969f49b54" args="(struct os_interrupt *interrupt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__process.html">os_process</a>* __os_interrupt_get_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__interrupt.html">os_interrupt</a> *&nbsp;</td>
          <td class="paramname"> <em>interrupt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the interrupt process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interrupt</em>&nbsp;</td><td>The interrupt </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The process of the interrupt </dd></dl>

<p>Definition at line <a class="el" href="os__interrupt_8h_source.html#l00103">103</a> of file <a class="el" href="os__interrupt_8h_source.html">os_interrupt.h</a>.</p>

<p>References <a class="el" href="os__interrupt_8h_source.html#l00077">os_interrupt::core</a>.</p>

<p>Referenced by <a class="el" href="os__interrupt_8c_source.html#l00017">__os_interrupt_handler()</a>, <a class="el" href="os__interrupt_8c_source.html#l00032">os_interrupt_create()</a>, <a class="el" href="os__interrupt_8h_source.html#l00169">os_interrupt_get_priority()</a>, <a class="el" href="os__interrupt_8h_source.html#l00156">os_interrupt_set_priority()</a>, and <a class="el" href="os__interrupt_8h_source.html#l00144">os_interrupt_trigger()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                        {
    <span class="keywordflow">return</span> &amp;interrupt-&gt;<a class="code" href="structos__interrupt.html#aa89fd307dd2edf4a9043cb1450d6b552" title="Task context of the interrupt.">core</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga0bb8d2ee09ad338228d8d32a90846891"></a><!-- doxytag: member="os_interrupt.h::__os_interrupt_handler" ref="ga0bb8d2ee09ad338228d8d32a90846891" args="(os_ptr_t args)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_interrupt_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>args</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Software interrupt handler. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>args</em>&nbsp;</td><td>A pointer on a <a class="el" href="structos__interrupt.html">os_interrupt</a> structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="os__interrupt_8c_source.html#l00017">17</a> of file <a class="el" href="os__interrupt_8c_source.html">os_interrupt.c</a>.</p>

<p>References <a class="el" href="os__interrupt_8h_source.html#l00103">__os_interrupt_get_process()</a>, <a class="el" href="os__core_8c_source.html#l00185">__os_process_disable_naked()</a>, <a class="el" href="os__interrupt_8h_source.html#l00083">os_interrupt::args</a>, <a class="el" href="os__interrupt_8h_source.html#l00080">os_interrupt::int_ptr</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, and <a class="el" href="os__port_8h_source.html#l00085">os_switch_context</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structos__interrupt.html" title="Software interrupt structure.">os_interrupt</a> *interrupt = (<span class="keyword">struct </span><a class="code" href="structos__interrupt.html" title="Software interrupt structure.">os_interrupt</a> *) <a class="code" href="structos__interrupt.html#a4a257500a9b4527c3733f22ef6afaf46" title="Arguments to pass to the interrupt handler.">args</a>;

    <span class="comment">/* Disable scheduler interrupts */</span>
    <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
    <span class="comment">/* Remove the interrupt from the chain list to prevent another execution</span>
<span class="comment">     */</span>
    <a class="code" href="group__group__os__internal__api.html#gaea1eec8813a3258a94fc0ec1989a3ecd">__os_process_disable_naked</a>(<a class="code" href="group__group__os__internal__api.html#ga597f874ef1e4f8a7fe3a3f5969f49b54" title="Get the interrupt process.">__os_interrupt_get_process</a>(interrupt));
    <span class="comment">/* Execute the interrupt handler */</span>
    interrupt-&gt;<a class="code" href="structos__interrupt.html#a418e37c95ec2f929c3adf4de7c8bd1a1" title="Pointer in the interrupt handler.">int_ptr</a>(interrupt-&gt;<a class="code" href="structos__interrupt.html#a4a257500a9b4527c3733f22ef6afaf46" title="Arguments to pass to the interrupt handler.">args</a>);
    <span class="comment">/* Manually call the scheduler */</span>
    <a class="code" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5" title="Context switch for a process.  Function used to schedule and switch between the processes.  This function will handle the return from a softwre interrupt. Therefore it can be optimized to bypass the saving context part IF an interrupt is running.">os_switch_context</a>(<span class="keyword">true</span>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9cac795e0d66983e9185e28d6349d8fd"></a><!-- doxytag: member="os_core.h::__os_process_application_disable" ref="ga9cac795e0d66983e9185e28d6349d8fd" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_application_disable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable the application process. </p>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00727">727</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00228">__os_process_disable()</a>, and <a class="el" href="os__core_8h_source.html#l00571">__os_process_is_application()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                          {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#gac86c447472c8c847e7c9aa3bd7c67e13" title="Check if a process is the application process.">__os_process_is_application</a>(&amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>)) {
        <a class="code" href="group__group__os__internal__api.html#ga8b77e662e12b6ec1437ac678246f4441" title="Disable the execution of a process.">__os_process_disable</a>(&amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae5be3214104fb39d793100cca34689b5"></a><!-- doxytag: member="os_core.h::__os_process_application_enable" ref="gae5be3214104fb39d793100cca34689b5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_application_enable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable the application process. </p>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00719">719</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00164">__os_process_enable()</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00738">__os_process_event_enable()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                         {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    <a class="code" href="group__group__os__internal__api.html#gadbbc7ac6ede447e46f3abd0b43cf7279" title="Enable the execution a process.">__os_process_enable</a>(&amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>);
    <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> = OS_PROCESS_TYPE_APPLICATION;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga0ae7ba755012c168f5f8244d5122fdbc"></a><!-- doxytag: member="os_core.h::__os_process_create" ref="ga0ae7ba755012c168f5f8244d5122fdbc" args="(struct os_process *proc, os_ptr_t sp, enum os_process_type type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="os__port_8h.html#a0c6bdb0cfe9a04a4942b875a52958fc9">os_ptr_t</a>&nbsp;</td>
          <td class="paramname"> <em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63">os_process_type</a>&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be initialized </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sp</em>&nbsp;</td><td>The stack pointer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The type of process </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00694">694</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00459">os_process::cycle_counter</a>, <a class="el" href="os__core_8h_source.html#l00328">OS_ALIGN_BACK</a>, <a class="el" href="os__core_8h_source.html#l00431">os_process::sp</a>, <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__interrupt_8c_source.html#l00032">os_interrupt_create()</a>, and <a class="el" href="os__task_8c_source.html#l00042">os_task_create()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                   {
    <span class="comment">/* Align the stack pointer within the stack. */</span>
    proc-&gt;<a class="code" href="structos__process.html#a54122d770255d24aef1f31c3768d6782" title="Stack pointer. Will always be the 1rst element of this structure to ensure the best optimization...">sp</a> = <a class="code" href="group__group__os__public__api.html#ga310e62b9be9b5083e3f149aa33871187" title="Align a pointer. The alignement is made backward compared to the initial pointer.">OS_ALIGN_BACK</a>(<a class="code" href="structos__process.html#a54122d770255d24aef1f31c3768d6782" title="Stack pointer. Will always be the 1rst element of this structure to ensure the best optimization...">sp</a>);
    <span class="comment">/* Set the type of the process (task, interrupt, ...) */</span>
    proc-&gt;<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> = <a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a>;
    <span class="comment">/* Set the status of the process. Initially it is set to idle. */</span>
    proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_IDLE;
<span class="preprocessor">#if CONFIG_OS_STATISTICS_MONITOR_TASK_SWITCH == true</span>
<span class="preprocessor"></span>    <span class="comment">/* Update the activity cycle counter of this task. */</span>
    proc-&gt;<a class="code" href="structos__process.html#a621c753963ba8d3de8fd2095b0f9a55d" title="Internal cycle counter increased during the activity of the task. It is used for statistics only...">cycle_counter</a> = 0;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga8b77e662e12b6ec1437ac678246f4441"></a><!-- doxytag: member="os_core.h::__os_process_disable" ref="ga8b77e662e12b6ec1437ac678246f4441" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_process_disable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable the execution of a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be disabled </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00228">228</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00185">__os_process_disable_naked()</a>, <a class="el" href="os__core_8h_source.html#l00627">__os_process_is_enabled()</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__port_8h_source.html#l00073">os_is_critical()</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, and <a class="el" href="os__port_8h_source.html#l00085">os_switch_context</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00727">__os_process_application_disable()</a>, <a class="el" href="os__core_8h_source.html#l00748">__os_process_event_disable()</a>, <a class="el" href="os__task_8h_source.html#l00175">os_task_delete()</a>, and <a class="el" href="os__task_8h_source.html#l00197">os_task_disable()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* Check if the current process is running inside a critical region. */</span>
    <span class="keywordtype">bool</span> is_critical = <a class="code" href="group__os__port__group.html#ga3409b487193b6c7fd877bc2f9c5b218a" title="Indicates if the CPU is currently running inside a critical region.">os_is_critical</a>();
    <span class="comment">/* The following code is critical, so enter in the critial region if</span>
<span class="comment">     * not already done.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
    }
    <span class="comment">/* Make sure the task is not already disabled */</span>
    <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#gaf164be52a80269392cd82f1845059058" title="Check wether a process is active or not.">__os_process_is_enabled</a>(proc)) {
        <span class="comment">/* If not, disable this process */</span>
        <a class="code" href="group__group__os__internal__api.html#gaea1eec8813a3258a94fc0ec1989a3ecd">__os_process_disable_naked</a>(proc);
    }
    <span class="comment">/* Manually switch context to stop the execution of this process if it</span>
<span class="comment">     * is the current process.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (proc == <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>) {
        <a class="code" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5" title="Context switch for a process.  Function used to schedule and switch between the processes.  This function will handle the return from a softwre interrupt. Therefore it can be optimized to bypass the saving context part IF an interrupt is running.">os_switch_context</a>(<span class="keyword">false</span>);
    }
    <span class="comment">/* Leave the critical region if the process was not previously in. */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaea1eec8813a3258a94fc0ec1989a3ecd"></a><!-- doxytag: member="os_core.h::__os_process_disable_naked" ref="gaea1eec8813a3258a94fc0ec1989a3ecd" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_process_disable_naked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Disable the execution of a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be disabled </td></tr>
  </table>
  </dd>
</dl>
 <dl class="warning"><dt><b>Warning:</b></dt><dd>This function does not check if the task is already disabled and should be used inside a critical area. It also does not stop after the execution of this function. </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00185">185</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00435">os_process::next</a>, <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__interrupt_8c_source.html#l00017">__os_interrupt_handler()</a>, <a class="el" href="os__core_8c_source.html#l00228">__os_process_disable()</a>, <a class="el" href="os__event_8c_source.html#l00276">__os_process_sleep()</a>, <a class="el" href="os__mutex_8c_source.html#l00049">os_mutex_lock()</a>, and <a class="el" href="os__semaphore_8c_source.html#l00055">os_semaphore_take()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> *last_proc = proc;

    <span class="comment">/* Look for the process before proc. A research is necessary at this</span>
<span class="comment">     * point since we are using a uni-directional circular chain list to</span>
<span class="comment">     * keep track of the active processes.</span>
<span class="comment">     */</span>
    <span class="keywordflow">while</span> (last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> != proc) {
        <span class="comment">/* If the process after last_proc is not equal to the proc, it</span>
<span class="comment">         * means we did not do a loop yet. So continue.</span>
<span class="comment">         */</span>
        last_proc = last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
    }
    <span class="comment">/* If last_proc == proc, it means that there is only 1 process in the</span>
<span class="comment">     * active process list. In that case, we need to replace the current</span>
<span class="comment">     * process with the application process.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (last_proc == proc) {
        <span class="comment">/* Loop the application process over itslef. */</span>
        <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = &amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
        <span class="comment">/* Set this process as the application process. This is</span>
<span class="comment">         * necessary since this process is shared with the event</span>
<span class="comment">         * process.</span>
<span class="comment">         */</span>
        <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> = OS_PROCESS_TYPE_APPLICATION;
        <span class="comment">/* Change the application process to active */</span>
        <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_ACTIVE;
        <span class="comment">/* Insert the application process in the active process list</span>
<span class="comment">         * after the current process.</span>
<span class="comment">         */</span>
        proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = &amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    }
    <span class="keywordflow">else</span> {
        <span class="comment">/* There is at least 2 processes in the active process list.</span>
<span class="comment">         * Remove the process (proc).</span>
<span class="comment">         */</span>
        last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
    }
    <span class="comment">/* Change the status of this process (proc) to idle. */</span>
    proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_IDLE;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gadbbc7ac6ede447e46f3abd0b43cf7279"></a><!-- doxytag: member="os_core.h::__os_process_enable" ref="gadbbc7ac6ede447e46f3abd0b43cf7279" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_process_enable </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable the execution a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be enabled </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00164">164</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00118">__os_process_enable_naked()</a>, <a class="el" href="os__core_8h_source.html#l00627">__os_process_is_enabled()</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__port_8h_source.html#l00073">os_is_critical()</a>, and <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00719">__os_process_application_enable()</a>, <a class="el" href="os__interrupt_8h_source.html#l00144">os_interrupt_trigger()</a>, and <a class="el" href="os__task_8h_source.html#l00188">os_task_enable()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">/* Check if the current process is running inside a critical region. */</span>
    <span class="keywordtype">bool</span> is_critical = <a class="code" href="group__os__port__group.html#ga3409b487193b6c7fd877bc2f9c5b218a" title="Indicates if the CPU is currently running inside a critical region.">os_is_critical</a>();
    <span class="comment">/* The following code is critical, so enter in the critial region if</span>
<span class="comment">     * not already done.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
    }
    <span class="comment">/* Make sure the task is not already enabled */</span>
    <span class="keywordflow">if</span> (!<a class="code" href="group__group__os__internal__api.html#gaf164be52a80269392cd82f1845059058" title="Check wether a process is active or not.">__os_process_is_enabled</a>(proc)) {
        <span class="comment">/* If not, enable this process */</span>
        <a class="code" href="group__group__os__internal__api.html#ga7f69e0876ae2707bddb35a3c8d270330">__os_process_enable_naked</a>(proc);
    }
    <span class="comment">/* Leave the critical region if the process was not previously in. */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga7f69e0876ae2707bddb35a3c8d270330"></a><!-- doxytag: member="os_core.h::__os_process_enable_naked" ref="ga7f69e0876ae2707bddb35a3c8d270330" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __os_process_enable_naked </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable the execution a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be enabled </td></tr>
  </table>
  </dd>
</dl>
 This function will push the task at the end of the chain list </p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This function does not check if the task is already added to the list and should be used inside a critical area. </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00118">118</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00571">__os_process_is_application()</a>, <a class="el" href="os__core_8h_source.html#l00435">os_process::next</a>, and <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>, <a class="el" href="os__core_8c_source.html#l00164">__os_process_enable()</a>, <a class="el" href="os__mutex_8c_source.html#l00082">os_mutex_unlock()</a>, and <a class="el" href="os__semaphore_8c_source.html#l00088">os_semaphore_release()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> *last_proc = proc;

    <span class="comment">/* Get the next process after the current one. This because the current</span>
<span class="comment">     * process can never be removed from the active process list because it</span>
<span class="comment">     * needs to store its context on its stack before beiing disbaled.</span>
<span class="comment">     */</span>
    last_proc = <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
<span class="preprocessor">#if CONFIG_OS_PROCESS_ENABLE_FIFO == true</span>
<span class="preprocessor"></span>    <span class="comment">/* Look for the last process in the circular chain list of active</span>
<span class="comment">     * processes.</span>
<span class="comment">     */</span>
    <span class="keywordflow">while</span> (last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> != <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>) {
        <span class="comment">/* If this process is _not_ equal to the first process we</span>
<span class="comment">         * checked, it means we did not do a loop yet. So continue.</span>
<span class="comment">         */</span>
        last_proc = last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
    }
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="comment">/* If the application process is running, remove it from the active</span>
<span class="comment">     * process list. The application process will run only if no process</span>
<span class="comment">     * are running.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#gac86c447472c8c847e7c9aa3bd7c67e13" title="Check if a process is the application process.">__os_process_is_application</a>(last_proc)) {
        <span class="comment">/* This process (proc) is then the only process that will be</span>
<span class="comment">         * running since we want to remove the application process. So</span>
<span class="comment">         * loop this process with himself (circular chain list).</span>
<span class="comment">         */</span>
        proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = proc;
        <span class="comment">/* Change the status of the application process to idle. */</span>
        <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_IDLE;
    }
    <span class="keywordflow">else</span> {
        <span class="comment">/* The application process is _not_ running, this is a normal</span>
<span class="comment">         * case. Insert the process (proc) inside the circular chain</span>
<span class="comment">         * list.</span>
<span class="comment">         */</span>
        proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
    }
    <span class="comment">/* Finalize the insertion of this process to the circular chain list. */</span>
    last_proc-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a> = proc;
    <span class="comment">/* Change the status of the process (proc) to active */</span>
    proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_ACTIVE;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac27975b4e6ef88d40949d7aedca64ad1"></a><!-- doxytag: member="os_core.h::__os_process_event_disable" ref="gac27975b4e6ef88d40949d7aedca64ad1" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_event_disable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable the event process If the event process is enabled, the application process will be disabled as they share the same process. </p>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00748">748</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00228">__os_process_disable()</a>, and <a class="el" href="os__core_8h_source.html#l00602">__os_process_is_event()</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                    {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#ga78b8cd7a259264c99b9fd11d62c62c35" title="Check if a process is the event scheduler.">__os_process_is_event</a>(&amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>)) {
        <a class="code" href="group__group__os__internal__api.html#ga8b77e662e12b6ec1437ac678246f4441" title="Disable the execution of a process.">__os_process_disable</a>(&amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga30477cfc382c7e5f54fbc88c1eb1ca0a"></a><!-- doxytag: member="os_core.h::__os_process_event_enable" ref="ga30477cfc382c7e5f54fbc88c1eb1ca0a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_event_enable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable the event process If the event process is enabled, the application process will be disabled as they share the same process. </p>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00738">738</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00719">__os_process_application_enable()</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00100">__os_event_register()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                   {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    <a class="code" href="group__group__os__internal__api.html#gae5be3214104fb39d793100cca34689b5" title="Enable the application process.">__os_process_application_enable</a>();
    <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>.<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> = OS_PROCESS_TYPE_EVENT;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gae6ebea205cb5febe50abc3a3dcd1ed32"></a><!-- doxytag: member="os_core.h::__os_process_get_application" ref="gae6ebea205cb5febe50abc3a3dcd1ed32" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__process.html">os_process</a>* __os_process_get_application </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the application process. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the application process </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00712">712</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                    {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> <a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
    <span class="keywordflow">return</span> &amp;<a class="code" href="os__core_8c.html#a8ff8ca073f1700d9729f30ccff2df5c1" title="Context of the application task. This contex is initially filled as an active task with the highest p...">os_app</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gad47b7f0e4e7fb6ca3b9337f27b58e4ce"></a><!-- doxytag: member="os_core.h::__os_process_get_current" ref="gad47b7f0e4e7fb6ca3b9337f27b58e4ce" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__process.html">os_process</a>* __os_process_get_current </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the current process. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer on the current procress </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00561">561</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00050">__os_current_process</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00276">__os_process_sleep()</a>, <a class="el" href="os__mutex_8c_source.html#l00049">os_mutex_lock()</a>, <a class="el" href="os__mutex_8c_source.html#l00082">os_mutex_unlock()</a>, <a class="el" href="os__semaphore_8c_source.html#l00055">os_semaphore_take()</a>, <a class="el" href="os__core_8h_source.html#l00819">os_start()</a>, <a class="el" href="os__task_8h_source.html#l00215">os_task_get_current()</a>, and <a class="el" href="os__statistics_8c_source.html#l00058">update_task_cycle_counter_start()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                {
    <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structos__process.html" title="This structure represents a process context.">os_process</a> *<a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>;
    <span class="keywordflow">return</span> __os_current_process;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaf8f901371c700984e8b4a80cf732902e"></a><!-- doxytag: member="os_core.h::__os_process_get_priority" ref="gaf8f901371c700984e8b4a80cf732902e" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dc">os_priority</a> __os_process_get_priority </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the priority of a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process which priority is requested </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The process priority </dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><a class="el" href="group__group__os__config.html#gae9508efbc3a0a00fc489f54d6ec6abfc">CONFIG_OS_USE_PRIORITY</a> needs to be set first </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00659">659</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00452">os_process::priority_counter</a>.</p>

<p>Referenced by <a class="el" href="os__interrupt_8h_source.html#l00169">os_interrupt_get_priority()</a>, <a class="el" href="os__statistics_8c_source.html#l00118">os_statistics_task_cpu_allocation()</a>, and <a class="el" href="os__task_8h_source.html#l00163">os_task_get_priority()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                                  {
    <span class="keywordflow">return</span> (<span class="keyword">enum</span> <a class="code" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dc" title="Priority values for a process. The lower get the most priority.">os_priority</a>) proc-&gt;<a class="code" href="structos__process.html#aa113cc75cb70683f12e4f8985b94c03d" title="Use to manage the process priorities Values are part of os_priority.">priority_counter</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gac86c447472c8c847e7c9aa3bd7c67e13"></a><!-- doxytag: member="os_core.h::__os_process_is_application" ref="gac86c447472c8c847e7c9aa3bd7c67e13" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_application </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if a process is the application process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this is the application process, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00571">571</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00395">OS_PROCESS_TYPE_APPLICATION</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00727">__os_process_application_disable()</a>, and <a class="el" href="os__core_8c_source.html#l00118">__os_process_enable_naked()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                        {
    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> == <a class="code" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63aafac53bd86729c91ffec31ba13d4efcb" title="Application process.">OS_PROCESS_TYPE_APPLICATION</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaf164be52a80269392cd82f1845059058"></a><!-- doxytag: member="os_core.h::__os_process_is_enabled" ref="gaf164be52a80269392cd82f1845059058" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_enabled </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check wether a process is active or not. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if enabled, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00627">627</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00417">OS_PROCESS_ACTIVE</a>, and <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>.</p>

<p>Referenced by <a class="el" href="os__core_8c_source.html#l00228">__os_process_disable()</a>, <a class="el" href="os__core_8c_source.html#l00164">__os_process_enable()</a>, <a class="el" href="os__event_8c_source.html#l00276">__os_process_sleep()</a>, and <a class="el" href="os__task_8h_source.html#l00207">os_task_is_enabled()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                    {
    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> == <a class="code" href="os__core_8h.html#aa863951969b10a00ca205c3eed363d11a30d367e0994d6fd9c21e326ce2516779" title="The process is active. It is stored in the active process list and will be proceed by the scheduler...">OS_PROCESS_ACTIVE</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga78b8cd7a259264c99b9fd11d62c62c35"></a><!-- doxytag: member="os_core.h::__os_process_is_event" ref="ga78b8cd7a259264c99b9fd11d62c62c35" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_event </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if a process is the event scheduler. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this is the event scheduler, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00602">602</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00404">OS_PROCESS_TYPE_EVENT</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00748">__os_process_event_disable()</a>, and <a class="el" href="os__core_8h_source.html#l00819">os_start()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                  {
<span class="preprocessor">#if CONFIG_OS_USE_EVENTS == true</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> == <a class="code" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63af3caddfd502b121285a1818b99efca5a" title="Event scheduler.">OS_PROCESS_TYPE_EVENT</a>);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga0270e506339646e6caffde26e8d7eb07"></a><!-- doxytag: member="os_core.h::__os_process_is_interrupt" ref="ga0270e506339646e6caffde26e8d7eb07" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_interrupt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if a process is a software interrupt. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this is a software interrupt, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00589">589</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00401">OS_PROCESS_TYPE_INTERRUPT</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                      {
<span class="preprocessor">#if CONFIG_OS_USE_SW_INTERRUPTS == true</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> == <a class="code" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63a921943ccceeac2caf5f68a04f02f818b" title="Software interrupt (Software Interrupt).">OS_PROCESS_TYPE_INTERRUPT</a>);
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabd275b0584fb99f4ab8d4b502f2aa204"></a><!-- doxytag: member="os_core.h::__os_process_is_pending" ref="gabd275b0584fb99f4ab8d4b502f2aa204" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_pending </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check wether a process is enabled or not. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if enabled, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00636">636</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00422">OS_PROCESS_PENDING</a>, and <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>.</p>

<p>Referenced by <a class="el" href="os__event_8c_source.html#l00141">__os_event_scheduler()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                    {
    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> == <a class="code" href="os__core_8h.html#aa863951969b10a00ca205c3eed363d11a4c5c777fd752e74da97dddd2cccdbab9" title="The process is in pending mode. It is currently disabled, it does not appear in the active process li...">OS_PROCESS_PENDING</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaccdbaa2aad69b06cd56fd72dba37732b"></a><!-- doxytag: member="os_core.h::__os_process_is_task" ref="gaccdbaa2aad69b06cd56fd72dba37732b" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool __os_process_is_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if a process is a task. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if this is a task, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00580">580</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00398">OS_PROCESS_TYPE_TASK</a>, and <a class="el" href="os__core_8h_source.html#l00443">os_process::type</a>.</p>

<p>Referenced by <a class="el" href="os__statistics_8c_source.html#l00118">os_statistics_task_cpu_allocation()</a>, and <a class="el" href="os__task_8h_source.html#l00215">os_task_get_current()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                 {
    <span class="keywordflow">return</span> (proc-&gt;<a class="code" href="structos__process.html#a91af490525b5103c277710eae9d3ac40" title="The type of the process Values are part of os_process_type.">type</a> == <a class="code" href="os__core_8h.html#a9469ceba4045fc9a6cdd1625f0b56e63a345193eb6642ff8f07890b36a3ea0839" title="Task (Task).">OS_PROCESS_TYPE_TASK</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga18198e84639c9f66f72900c76bb2fefb"></a><!-- doxytag: member="os_core.h::__os_process_set_priority" ref="ga18198e84639c9f66f72900c76bb2fefb" args="(struct os_process *proc, enum os_priority priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __os_process_set_priority </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="os__core_8h.html#a46596f7e1b6a7c074aafaf07503963dc">os_priority</a>&nbsp;</td>
          <td class="paramname"> <em>priority</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the priority of a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The process which needs some update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>priority</em>&nbsp;</td><td>The new priority </td></tr>
  </table>
  </dd>
</dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><a class="el" href="group__group__os__config.html#gae9508efbc3a0a00fc489f54d6ec6abfc">CONFIG_OS_USE_PRIORITY</a> needs to be set first </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00647">647</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8h_source.html#l00448">os_process::priority</a>, and <a class="el" href="os__core_8h_source.html#l00452">os_process::priority_counter</a>.</p>

<p>Referenced by <a class="el" href="os__interrupt_8h_source.html#l00156">os_interrupt_set_priority()</a>, and <a class="el" href="os__task_8h_source.html#l00153">os_task_set_priority()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                   {
    <span class="comment">/* Not critical so no need to use the os_enter_critical function */</span>
    proc-&gt;<a class="code" href="structos__process.html#aa43b9dd83eef04cded5e2c4947246eed" title="Priority of the process. Values are part of os_priority.">priority</a> = <a class="code" href="structos__process.html#aa43b9dd83eef04cded5e2c4947246eed" title="Priority of the process. Values are part of os_priority.">priority</a>;
    proc-&gt;<a class="code" href="structos__process.html#aa113cc75cb70683f12e4f8985b94c03d" title="Use to manage the process priorities Values are part of os_priority.">priority_counter</a> = <a class="code" href="structos__process.html#aa43b9dd83eef04cded5e2c4947246eed" title="Priority of the process. Values are part of os_priority.">priority</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaf4d96602eddb7c6a2ce5364b23dda921"></a><!-- doxytag: member="os_event.h::__os_process_sleep" ref="gaf4d96602eddb7c6a2ce5364b23dda921" args="(struct os_process *proc, struct os_queue_event *queue_elt, int nb_events,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__event.html">os_event</a>* __os_process_sleep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structos__queue__event.html">os_queue_event</a> *&nbsp;</td>
          <td class="paramname"> <em>queue_elt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nb_events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generic function to send a processus to sleep. The process can be waken up by one or more events passed in parameter. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>The processus to send to sleep </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>queue_elt</em>&nbsp;</td><td>The empty <a class="el" href="structos__queue__event.html">os_queue_event</a> structure to hold each process instance in the events used to wake up the process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nb_events</em>&nbsp;</td><td>The number of events defined to wake up this process </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>A list of <a class="el" href="structos__event.html">os_event</a> which can wake up this process </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer on the event which woke up the process </dd></dl>

<p>Definition at line <a class="el" href="os__event_8c_source.html#l00276">276</a> of file <a class="el" href="os__event_8c_source.html">os_event.c</a>.</p>

<p>References <a class="el" href="os__event_8c_source.html#l00100">__os_event_register()</a>, <a class="el" href="os__event_8c_source.html#l00083">__os_event_start()</a>, <a class="el" href="os__core_8c_source.html#l00185">__os_process_disable_naked()</a>, <a class="el" href="os__core_8h_source.html#l00561">__os_process_get_current()</a>, <a class="el" href="os__core_8h_source.html#l00627">__os_process_is_enabled()</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="os__port_8h_source.html#l00073">os_is_critical()</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, <a class="el" href="os__port_8h_source.html#l00085">os_switch_context</a>, and <a class="el" href="os__core_8h_source.html#l00439">os_process::status</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> i;
    va_list ap;
    <span class="keyword">struct </span><a class="code" href="structos__event.html" title="Event structure.">os_event</a> *event, *event_triggered = NULL;
    <span class="comment">/* Save the critical region status */</span>
    <span class="keywordtype">bool</span> is_critical = <a class="code" href="group__os__port__group.html#ga3409b487193b6c7fd877bc2f9c5b218a" title="Indicates if the CPU is currently running inside a critical region.">os_is_critical</a>();

    <span class="comment">/* Enter in a critical region if not already in */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga8c5be06e8a791ac257e372d19a41e527" title="Start of a critical code region. Preemptive context switches cannot occur when in a critical region...">os_enter_critical</a>();
    }

    <span class="comment">/* Disable the process (send it to sleep) */</span>
    <span class="keywordflow">if</span> (<a class="code" href="group__group__os__internal__api.html#gaf164be52a80269392cd82f1845059058" title="Check wether a process is active or not.">__os_process_is_enabled</a>(proc)) {
        <a class="code" href="group__group__os__internal__api.html#gaea1eec8813a3258a94fc0ec1989a3ecd">__os_process_disable_naked</a>(proc);
    }

    <span class="comment">/* Set the process status to pending */</span>
    proc-&gt;<a class="code" href="structos__process.html#a87bd95c5cfee304ea067207481a465db" title="Indicates if the process is active or not. Values are part of os_process_status.">status</a> = OS_PROCESS_PENDING;

    <span class="comment">/* No event has been triggered so far so update the feedback variable</span>
<span class="comment">     * to NULL.</span>
<span class="comment">     */</span>
    event_triggered = NULL;

    <span class="comment">/* Initialize relation pointer between the queue elements */</span>
    queue_elt[0].relation = &amp;queue_elt[0];

    va_start(ap, nb_events);
    i = nb_events;
    <span class="keywordflow">while</span> (i--) {
        <span class="comment">/* Get the next event from the list */</span>
        <span class="keyword">event</span> = va_arg(ap, <span class="keyword">struct</span> <a class="code" href="structos__event.html" title="Event structure.">os_event</a> *);
        <span class="comment">/* Start the event */</span>
        <a class="code" href="os__event_8c.html#a1cf3a5322c6bf675fc86997f00ab0215" title="Initialize the event by calling its setup function.">__os_event_start</a>(event, proc);
        <span class="comment">/* Register the process in the active event list */</span>
        <a class="code" href="os__event_8c.html#a85fdba55a657b03110c45903a370267f" title="Register an event into the active event list.">__os_event_register</a>(event, &amp;queue_elt[i], proc, &amp;event_triggered);
        <span class="comment">/* Build a relation between the processes registered */</span>
        <span class="keywordflow">if</span> (i) {
            queue_elt[i].relation = queue_elt[0].relation;
            queue_elt[0].relation = &amp;queue_elt[i];
        }
    }
    va_end(ap);

    <span class="comment">/* If the process to be send to sleep is thye current process, stop it</span>
<span class="comment">     * and use a garbage collector wipe out the extra events registered.</span>
<span class="comment">     */</span>
    <span class="keywordflow">if</span> (proc == <a class="code" href="group__group__os__internal__api.html#gad47b7f0e4e7fb6ca3b9337f27b58e4ce" title="Get the current process.">__os_process_get_current</a>()) {
        <span class="comment">/* Call the scheduler */</span>
        <a class="code" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5" title="Context switch for a process.  Function used to schedule and switch between the processes.  This function will handle the return from a softwre interrupt. Therefore it can be optimized to bypass the saving context part IF an interrupt is running.">os_switch_context</a>(<span class="keyword">false</span>);
    }

    <span class="comment">/* Leave the critical region */</span>
    <span class="keywordflow">if</span> (!is_critical) {
        <a class="code" href="group__os__port__group.html#ga1ed5e871f1b9707aafedd8f97d9d6524" title="Exit a critical code region. .">os_leave_critical</a>();
    }

    <span class="comment">/* Returns a pointer on the event which has woken up the process */</span>
    <span class="keywordflow">return</span> event_triggered;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gabfa157529174d1ff2b9df08294b8059d"></a><!-- doxytag: member="os_core.h::__os_scheduler" ref="gabfa157529174d1ff2b9df08294b8059d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structos__process.html">os_process</a>* __os_scheduler </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function will define the rules to change the task. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The new task context </dd></dl>

<p>Definition at line <a class="el" href="os__core_8c_source.html#l00060">60</a> of file <a class="el" href="os__core_8c_source.html">os_core.c</a>.</p>

<p>References <a class="el" href="os__debug_8h_source.html#l00080">__HOOK_OS_DEBUG_TRACE_LOG</a>, <a class="el" href="os__core_8h_source.html#l00435">os_process::next</a>, <a class="el" href="os__debug_8h_source.html#l00128">OS_DEBUG_TRACE_CONTEXT_SWITCH</a>, <a class="el" href="os__interrupt_8h_source.html#l00047">OS_SCHEDULER_PRE_INTERRUPT_HOOK</a>, <a class="el" href="os__core_8h_source.html#l00448">os_process::priority</a>, and <a class="el" href="os__core_8h_source.html#l00452">os_process::priority_counter</a>.</p>

<p>Referenced by <a class="el" href="os__core_8h_source.html#l00675">__os_switch_context_hook()</a>, and <a class="el" href="os__core_8h_source.html#l00785">__os_switch_context_int_handler_hook()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">do</span> {
        <span class="comment">/* Get the next process in the active process list */</span>
        <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a> = <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#a3690866f5fae9a861e92351fed428c3e" title="Pointer of the next process in the list. Active processes are registered within a chain list...">next</a>;
        <span class="comment">/* Check its priority counter and defines if it will run or not</span>
<span class="comment">         */</span>
        <span class="keywordflow">if</span> (<a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#aa113cc75cb70683f12e4f8985b94c03d" title="Use to manage the process priorities Values are part of os_priority.">priority_counter</a> == 0) {
            <span class="comment">/* Reload the priority counter */</span>
            <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#aa113cc75cb70683f12e4f8985b94c03d" title="Use to manage the process priorities Values are part of os_priority.">priority_counter</a> =
                    <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#aa43b9dd83eef04cded5e2c4947246eed" title="Priority of the process. Values are part of os_priority.">priority</a>;
            <span class="comment">/* Interrupt hook, will be used only if interrupt are</span>
<span class="comment">             * enabled.</span>
<span class="comment">             */</span>
            <a class="code" href="os__interrupt_8h.html#ab8b4fd2fe2352c0a506d4885e0488635">OS_SCHEDULER_PRE_INTERRUPT_HOOK</a>();
            <span class="comment">/* Log the context switch event. Active only if the</span>
<span class="comment">             * trace functionality is enabled.</span>
<span class="comment">             */</span>
            <a class="code" href="os__debug_8h.html#afffc83512f34a1b8ce8e19094a05dd31" title="Trace a code execution. This macro is called to trace the CPU execution.">__HOOK_OS_DEBUG_TRACE_LOG</a>(<a class="code" href="os__debug_8h.html#a392e1d4db5e097ef4a5b996f6886e8e5a213171a54ab1f282f0842f68087c53b0" title="When __os_scheduler is called.">OS_DEBUG_TRACE_CONTEXT_SWITCH</a>,
                    <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>);
            <span class="comment">/* Return the new process to be executed. The context</span>
<span class="comment">             * will be switch to enable this process.</span>
<span class="comment">             */</span>
            <span class="keywordflow">return</span> <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>;
        }
        <span class="comment">/* If the scheduler did not decide to run this process due to</span>
<span class="comment">         * its priority level, then decrease its priority counter.</span>
<span class="comment">         */</span>
        <a class="code" href="os__core_8c.html#a584de509d9e87fe2e16949cda1c362fa" title="Pointer to keep track of the current process running. This is also the entry point of the active proc...">__os_current_process</a>-&gt;<a class="code" href="structos__process.html#aa113cc75cb70683f12e4f8985b94c03d" title="Use to manage the process priorities Values are part of os_priority.">priority_counter</a>--;
    <span class="comment">/* This is a infinite loop why exists only if a process has the right</span>
<span class="comment">     * priority to be execute. It also means that at least 1 process should</span>
<span class="comment">     * be on the active process list all the time.</span>
<span class="comment">     */</span>
    } <span class="keywordflow">while</span> (<span class="keyword">true</span>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gaabadca5512257f087d9a0c1018e21bba"></a><!-- doxytag: member="os_core.h::__os_switch_context_hook" ref="gaabadca5512257f087d9a0c1018e21bba" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__process.html">os_process</a>* __os_switch_context_hook </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function must be called inside the<a class="el" href="group__os__port__group.html#gae36200d59d62e81114d9330a2cab31c5">os_switch_context</a> function in order to switch process context. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The context of the new process </dd></dl>

<p>Definition at line <a class="el" href="os__core_8h_source.html#l00675">675</a> of file <a class="el" href="os__core_8h_source.html">os_core.h</a>.</p>

<p>References <a class="el" href="os__core_8c_source.html#l00060">__os_scheduler()</a>, and <a class="el" href="os__interrupt_8h_source.html#l00061">OS_SCHEDULER_POST_INTERRUPT_HOOK</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                {
<span class="preprocessor">#ifdef OS_SCHEDULER_POST_INTERRUPT_HOOK</span>
<span class="preprocessor"></span>    <span class="comment">/* Clear the software interrupt if needed */</span>
    <a class="code" href="os__interrupt_8h.html#a0a55e3754e380e60d0a7d8eeb7f35b76">OS_SCHEDULER_POST_INTERRUPT_HOOK</a>();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span><span class="preprocessor">#ifdef OS_SCHEDULER_POST_EVENT_HOOK</span>
<span class="preprocessor"></span>    <span class="comment">/* Use the alternate task if any */</span>
    OS_SCHEDULER_POST_EVENT_HOOK();
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <span class="comment">/* Task switch context */</span>
    <span class="keywordflow">return</span> <a class="code" href="group__group__os__internal__api.html#gabfa157529174d1ff2b9df08294b8059d" title="This function will define the rules to change the task.">__os_scheduler</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga9af88f94162d05e65151c9f93c27319d"></a><!-- doxytag: member="os_task.h::__os_task_from_process" ref="ga9af88f94162d05e65151c9f93c27319d" args="(struct os_process *proc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__task.html">os_task</a>* __os_task_from_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__process.html">os_process</a> *&nbsp;</td>
          <td class="paramname"> <em>proc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the task associated with a process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>proc</em>&nbsp;</td><td>the process </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The task pointer </dd></dl>

<p>Definition at line <a class="el" href="os__task_8h_source.html#l00098">98</a> of file <a class="el" href="os__task_8h_source.html">os_task.h</a>.</p>

<p>References <a class="el" href="os__task_8h_source.html#l00082">os_task::core</a>, and <a class="el" href="os__core_8h_source.html#l00309">OS_CONTAINER_OF</a>.</p>

<p>Referenced by <a class="el" href="os__task_8h_source.html#l00215">os_task_get_current()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                              {
    <span class="keywordflow">return</span> <a class="code" href="group__group__os__public__api.html#ga52cb8c03bd5a4fc2bd2eb0015e587afa" title="Retrieve the pointer of the containing structure of the ptr element.">OS_CONTAINER_OF</a>(proc, <span class="keyword">struct</span> <a class="code" href="structos__task.html">os_task</a>, core);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="gafb21284eaa777fe2d2b2352fabff3566"></a><!-- doxytag: member="os_task.h::__os_task_get_process" ref="gafb21284eaa777fe2d2b2352fabff3566" args="(struct os_task *task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structos__process.html">os_process</a>* __os_task_get_process </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structos__task.html">os_task</a> *&nbsp;</td>
          <td class="paramname"> <em>task</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the task process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>task</em>&nbsp;</td><td>The task </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The process of the task </dd></dl>

<p>Definition at line <a class="el" href="os__task_8h_source.html#l00107">107</a> of file <a class="el" href="os__task_8h_source.html">os_task.h</a>.</p>

<p>References <a class="el" href="os__task_8h_source.html#l00082">os_task::core</a>.</p>

<p>Referenced by <a class="el" href="os__statistics_8c_source.html#l00118">os_statistics_task_cpu_allocation()</a>, <a class="el" href="os__task_8c_source.html#l00042">os_task_create()</a>, <a class="el" href="os__task_8h_source.html#l00175">os_task_delete()</a>, <a class="el" href="os__task_8h_source.html#l00197">os_task_disable()</a>, <a class="el" href="os__task_8h_source.html#l00188">os_task_enable()</a>, <a class="el" href="os__task_8h_source.html#l00163">os_task_get_priority()</a>, <a class="el" href="os__task_8h_source.html#l00207">os_task_is_enabled()</a>, and <a class="el" href="os__task_8h_source.html#l00153">os_task_set_priority()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                             {
    <span class="keywordflow">return</span> &amp;task-&gt;<a class="code" href="structos__task.html#a0d63a0a7f74b7a063db1df3f55c965b0" title="Minimal context.">core</a>;
}
</pre></div></p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Feb 29 2012 13:28:07 for eeOS (Embedded Event-driven Operating System) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
