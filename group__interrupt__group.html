<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OS: Global interrupt management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Global interrupt management</div>  </div>
</div>
<div class="contents">

<p>This is a driver for global enabling and disabling of interrupts.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Global interrupt management:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__interrupt__group.gif" border="0" alt="" usemap="#group____interrupt____group"/>
<map name="group____interrupt____group" id="group____interrupt____group">
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__deprecated__group.html">Deprecated interrupt definitions</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Force usage of the ASF INTC driver.  <a href="#ga883d4a74a24d4a98f3a5d8dc146a217d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gad5f77ebc8854191fe7bf04c42453e7fa">__int_handler</a> )(void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to interrupt handler.  <a href="#gad5f77ebc8854191fe7bf04c42453e7fa"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Global interrupt flags</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Type used for holding state of interrupt flag.  <a href="#ga9aa1f52defc97531b6343233abeea613"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771">cpu_irq_save</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get and clear the global interrupt flags.  <a href="#ga5992cb015c55a0f4ed563e66a8793771"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga4dffd77dae2b3b3c5bce2612db656e48">cpu_irq_is_enabled_flags</a> (<a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a> flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if interrupts are globally enabled in supplied flags.  <a href="#ga4dffd77dae2b3b3c5bce2612db656e48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa">cpu_irq_restore</a> (<a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a> flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore global interrupt flags.  <a href="#ga428178bc346431936fddf52ad1ebd6fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gae4922a4bd8ba4150211fbc7f2302403c">cpu_irq_enable</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupts globally.  <a href="#gae4922a4bd8ba4150211fbc7f2302403c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga7b77391ed86e2e027f9ee1dd99a06980">cpu_irq_disable</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable interrupts globally.  <a href="#ga7b77391ed86e2e027f9ee1dd99a06980"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gae1545a2473614564550b9c4015c94978">cpu_irq_is_enabled</a>()&#160;&#160;&#160;cpu_irq_is_enabled_flags(sysreg_read(AVR32_SR))</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if interrupts are globally enabled.  <a href="#gae1545a2473614564550b9c4015c94978"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Interrupt Service Routine definition and registration</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga4d4c043147115bbac3abb3b28ab3466b">ISR</a>(func, int_grp, int_lvl)&#160;&#160;&#160;__attribute__((__interrupt__)) static void func (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Define service routine.  <a href="#ga4d4c043147115bbac3abb3b28ab3466b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga931b667f6490ad3d8905fa25bebb24b1">irq_initialize_vectors</a>()&#160;&#160;&#160;INTC_init_interrupts()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize interrupt vectors.  <a href="#ga931b667f6490ad3d8905fa25bebb24b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f">irq_register_handler</a>(func, int_num, int_lvl)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Register handler for interrupt.  <a href="#ga868d7dab733175af137af27093316f8f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="member-group"></a>
Global interrupt levels</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga29a1eb079767f47db67eebe8cdebb4ba">cpu_irq_level_is_enabled_flags</a> (<a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a> flags, uint32_t level)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if interrupt level is enabled in supplied flags.  <a href="#ga29a1eb079767f47db67eebe8cdebb4ba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#gaac8bab36e8dbe3b526b7869e18f827ea">cpu_irq_level_is_enabled</a>(level)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if interrupt level is enabled.  <a href="#gaac8bab36e8dbe3b526b7869e18f827ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga3bb10de58bfe2953501b80835ed68cee">cpu_irq_enable_level</a>(level)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable interrupt level.  <a href="#ga3bb10de58bfe2953501b80835ed68cee"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__group.html#ga1b7b366b2e21e2362d05b8ab5ff7190b">cpu_irq_disable_level</a>(level)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable interrupt level.  <a href="#ga1b7b366b2e21e2362d05b8ab5ff7190b"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>This is a driver for global enabling and disabling of interrupts. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga883d4a74a24d4a98f3a5d8dc146a217d"></a><!-- doxytag: member="interrupt.h::CONFIG_INTERRUPT_FORCE_INTC" ref="ga883d4a74a24d4a98f3a5d8dc146a217d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_INTERRUPT_FORCE_INTC</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Force usage of the ASF INTC driver. </p>
<p>Predefine this symbol when preprocessing to force the use of the ASF INTC driver. This is useful to ensure compatibilty accross compilers and shall be used only when required by the application needs. </p>

<p>Definition at line <a class="el" href="interrupt_8h_source.html#l00068">68</a> of file <a class="el" href="interrupt_8h_source.html">interrupt.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7b77391ed86e2e027f9ee1dd99a06980"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_disable" ref="ga7b77391ed86e2e027f9ee1dd99a06980" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_disable</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                           \
        __builtin_ssrf(AVR32_SR_GM_OFFSET);    \
        <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();                             \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Disable interrupts globally. </p>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00170">170</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="interrupt__avr32_8h_source.html#l00195">cpu_irq_save()</a>, <a class="el" href="os__port_8h_source.html#l00065">os_enter_critical()</a>, <a class="el" href="uc3__port_8c_source.html#l00037">os_setup_scheduler()</a>, <a class="el" href="pm_8c_source.html#l00495">pm_bod_disable_irq()</a>, <a class="el" href="rtc_8c_source.html#l00174">rtc_clear_interrupt()</a>, and <a class="el" href="rtc_8c_source.html#l00163">rtc_disable_interrupt()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1b7b366b2e21e2362d05b8ab5ff7190b"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_disable_level" ref="ga1b7b366b2e21e2362d05b8ab5ff7190b" args="(level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_disable_level</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                             \
        __builtin_ssrf(<a class="code" href="group__group__avr32__utils__tpaste.html#ga3774e5e321825e6ab4a27fef2a0deb14">TPASTE3</a>(AVR32_SR_I, level, M_OFFSET));    \
        <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();                                               \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Disable interrupt level. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Interrupt level to disable (0 to 3).</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The interrupt level must be known at compile time. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00278">278</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae4922a4bd8ba4150211fbc7f2302403c"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_enable" ref="gae4922a4bd8ba4150211fbc7f2302403c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_enable</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                           \
        <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();                             \
        __builtin_csrf(AVR32_SR_GM_OFFSET);    \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Enable interrupts globally. </p>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00165">165</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="interrupt__avr32_8h_source.html#l00210">cpu_irq_restore()</a>, <a class="el" href="os__port_8h_source.html#l00069">os_leave_critical()</a>, <a class="el" href="uc3__port_8c_source.html#l00037">os_setup_scheduler()</a>, <a class="el" href="pm_8c_source.html#l00495">pm_bod_disable_irq()</a>, <a class="el" href="rtc_8c_source.html#l00174">rtc_clear_interrupt()</a>, and <a class="el" href="rtc_8c_source.html#l00163">rtc_disable_interrupt()</a>.</p>

</div>
</div>
<a class="anchor" id="ga3bb10de58bfe2953501b80835ed68cee"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_enable_level" ref="ga3bb10de58bfe2953501b80835ed68cee" args="(level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_enable_level</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> {                                                             \
        <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();                                               \
        __builtin_csrf(<a class="code" href="group__group__avr32__utils__tpaste.html#ga3774e5e321825e6ab4a27fef2a0deb14">TPASTE3</a>(AVR32_SR_I, level, M_OFFSET));    \
    } <span class="keywordflow">while</span> (0)
</pre></div>
<p>Enable interrupt level. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Interrupt level to enable (0 to 3).</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The interrupt level must be known at compile time. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00265">265</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<a class="anchor" id="gae1545a2473614564550b9c4015c94978"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_is_enabled" ref="gae1545a2473614564550b9c4015c94978" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_is_enabled</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;cpu_irq_is_enabled_flags(sysreg_read(AVR32_SR))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if interrupts are globally enabled. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interrupts are enabled. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00225">225</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="pm_8c_source.html#l00495">pm_bod_disable_irq()</a>, <a class="el" href="rtc_8c_source.html#l00174">rtc_clear_interrupt()</a>, and <a class="el" href="rtc_8c_source.html#l00163">rtc_disable_interrupt()</a>.</p>

</div>
</div>
<a class="anchor" id="gaac8bab36e8dbe3b526b7869e18f827ea"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_level_is_enabled" ref="gaac8bab36e8dbe3b526b7869e18f827ea" args="(level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cpu_irq_level_is_enabled</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">level</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="group__interrupt__group.html#ga29a1eb079767f47db67eebe8cdebb4ba" title="Check if interrupt level is enabled in supplied flags.">cpu_irq_level_is_enabled_flags</a>(<a class="code" href="group__group__avr32__utils.html#ga5639b08e59ef64431bf29c03e260c22b" title="Get value of system register.">sysreg_read</a>(AVR32_SR),             \
            <a class="code" href="group__group__avr32__utils__tpaste.html#ga3774e5e321825e6ab4a27fef2a0deb14">TPASTE3</a>(AVR32_SR_I, level, M_OFFSET))
</pre></div>
<p>Check if interrupt level is enabled. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>Interrupt level (0 to 3).</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interrupt level <em>level</em> is enabled.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The interrupt level must be known at compile time. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00253">253</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga931b667f6490ad3d8905fa25bebb24b1"></a><!-- doxytag: member="interrupt_avr32.h::irq_initialize_vectors" ref="ga931b667f6490ad3d8905fa25bebb24b1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define irq_initialize_vectors</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;INTC_init_interrupts()</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize interrupt vectors. </p>
<p>With GCC, this macro adds code for initialization of the interrupt vectors with the driver for the interrupt controller (INTC).</p>
<p>With IAR and unless <a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a> is defined this macro adds no code, since initialization of the INTC is handled by the compiler. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Defining <a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a> will force the use of the INTC driver, replacing the compiler built-in interrupt handler.</dd></dl>
<p>This must be called prior to <a class="el" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f">irq_register_handler</a>. </p>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00125">125</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="uc3__port_8c_source.html#l00037">os_setup_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="ga868d7dab733175af137af27093316f8f"></a><!-- doxytag: member="interrupt_avr32.h::irq_register_handler" ref="ga868d7dab733175af137af27093316f8f" args="(func, int_num, int_lvl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define irq_register_handler</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_num, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_lvl&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">INTC_register_interrupt(func, int_num,                                 \
            <a class="code" href="group__group__avr32__utils__tpaste.html#ga55fb148844f5ba993a992b609728e82e">TPASTE2</a>(AVR32_INTC_INT, int_lvl))
</pre></div>
<p>Register handler for interrupt. </p>
<p>With GCC, this macro adds code for registering an interrupt handler with the driver for the interrupt controller (INTC).</p>
<p>With IAR and unless <a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a> is defined this macro adds no code, since initialization of the INTC is handled by the compiler. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Defining <a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a> will force the use of the INTC driver, replacing the compiler built-in interrupt handler.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Name of handler function to register for interrupt. </td></tr>
    <tr><td class="paramname">int_num</td><td>Number of the interrupt line to register function for. </td></tr>
    <tr><td class="paramname">int_lvl</td><td>Priority level to set for the interrupt's group, in the range <code>0</code> to <code>3</code>.</td></tr>
  </table>
  </dd>
</dl>
<p>Usage: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="group__interrupt__group.html#ga931b667f6490ad3d8905fa25bebb24b1" title="Initialize interrupt vectors.">irq_initialize_vectors</a>();
 <a class="code" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f" title="Register handler for interrupt.">irq_register_handler</a>(foo_irq_handler, AVR32_xxx_IRQ, n);
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The function <em>func</em> must be defined with the <a class="el" href="uc3__port_8c.html#a7adf57f493e17b882f4bbf8c3bd96351">ISR</a> macro. </dd>
<dd>
The interrupt line number can be found in the device header files for the GCC toolchain (avr32/&lt;part&gt;.h). </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00153">153</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="uc3__port_8c_source.html#l00037">os_setup_scheduler()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4d4c043147115bbac3abb3b28ab3466b"></a><!-- doxytag: member="interrupt_avr32.h::ISR" ref="ga4d4c043147115bbac3abb3b28ab3466b" args="(func, int_grp, int_lvl)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ISR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">func, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_grp, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">int_lvl&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;__attribute__((__interrupt__)) static void func (void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Define service routine. </p>
<p>With GCC, this macro only causes the function to be defined as an interrupt service routine, i.e., it does not add any initialization code. A valid function name is required for use with <a class="el" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f">irq_register_handler</a>.</p>
<p>With IAR, this macro defines the function as an interrupt service routine and causes the compiler to add initialization code for the interrupt controller (INTC). The interrupt group and level, as well as a valid function name are therefore required.<br/>
 </p>
<dl class="note"><dt><b>Note:</b></dt><dd>If <a class="el" href="group__interrupt__group.html#ga883d4a74a24d4a98f3a5d8dc146a217d">CONFIG_INTERRUPT_FORCE_INTC</a> is defined, only a valid function name is required for use with <a class="el" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f">irq_register_handler</a>. The initialization code will be handled by the interrupt controller itself.</dd></dl>
<p>Usage: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="uc3__port_8c.html#a7adf57f493e17b882f4bbf8c3bd96351">ISR</a>(foo_irq_handler, AVR32_xxx_IRQ_GROUP, n)
 {
      <span class="comment">// Function definition</span>
      ...
 }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>Name for the function, needed by <a class="el" href="group__interrupt__group.html#ga868d7dab733175af137af27093316f8f">irq_register_handler</a>. </td></tr>
    <tr><td class="paramname">int_grp</td><td>Interrupt group to define service routine for. </td></tr>
    <tr><td class="paramname">int_lvl</td><td>Priority level to set for the interrupt group, in the range <code>0</code> to <code>3</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The interrupt groups can be found in the device header files for the IAR toolchain (avr32/io&lt;part&gt;.h).</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Update to use IRQ numbers when these are made available in the device header files of both IAR and GCC. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00099">99</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gad5f77ebc8854191fe7bf04c42453e7fa"></a><!-- doxytag: member="interrupt_avr32.h::__int_handler" ref="gad5f77ebc8854191fe7bf04c42453e7fa" args=")(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__interrupt__group.html#gad5f77ebc8854191fe7bf04c42453e7fa">__int_handler</a>)(void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to interrupt handler. </p>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00052">52</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga9aa1f52defc97531b6343233abeea613"></a><!-- doxytag: member="interrupt_avr32.h::irqflags_t" ref="ga9aa1f52defc97531b6343233abeea613" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Type used for holding state of interrupt flag. </p>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00193">193</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga4dffd77dae2b3b3c5bce2612db656e48"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_is_enabled_flags" ref="ga4dffd77dae2b3b3c5bce2612db656e48" args="(irqflags_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> cpu_irq_is_enabled_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if interrupts are globally enabled in supplied flags. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Currents state of interrupt flags.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interrupts are enabled. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00205">205</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>Referenced by <a class="el" href="interrupt__avr32_8h_source.html#l00210">cpu_irq_restore()</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> !(flags &amp; AVR32_SR_GM_MASK);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga29a1eb079767f47db67eebe8cdebb4ba"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_level_is_enabled_flags" ref="ga29a1eb079767f47db67eebe8cdebb4ba" args="(irqflags_t flags, uint32_t level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="compiler_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> cpu_irq_level_is_enabled_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if interrupt level is enabled in supplied flags. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>State of interrupt flags. </td></tr>
    <tr><td class="paramname">level</td><td>Bit position for interrupt level.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interrupt level is enabled. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00238">238</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> !(flags &amp; (1 &lt;&lt; level));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ga428178bc346431936fddf52ad1ebd6fa"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_restore" ref="ga428178bc346431936fddf52ad1ebd6fa" args="(irqflags_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cpu_irq_restore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restore global interrupt flags. </p>
<p>Use in conjunction with <a class="el" href="group__interrupt__group.html#ga5992cb015c55a0f4ed563e66a8793771">cpu_irq_save</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>State to set interrupt flag to. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00210">210</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>References <a class="el" href="compiler_8h_source.html#l00088">barrier</a>, <a class="el" href="interrupt__avr32_8h_source.html#l00165">cpu_irq_enable</a>, <a class="el" href="interrupt__avr32_8h_source.html#l00205">cpu_irq_is_enabled_flags()</a>, and <a class="el" href="compiler_8h_source.html#l00177">sysreg_write</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();
<span class="preprocessor">#if defined(__ICCAVR32__)</span>
<span class="preprocessor"></span>   <span class="comment">// Barrier &quot; __asm__ __volatile__ (&quot;&quot;)&quot;</span>
   <span class="comment">// Don&#39;t work with sysreg_write(AVR32_SR, flags)</span>
   <span class="keywordflow">if</span>( <a class="code" href="group__interrupt__group.html#ga4dffd77dae2b3b3c5bce2612db656e48" title="Check if interrupts are globally enabled in supplied flags.">cpu_irq_is_enabled_flags</a>(flags) ) {
      <a class="code" href="group__interrupt__group.html#gae4922a4bd8ba4150211fbc7f2302403c" title="Enable interrupts globally.">cpu_irq_enable</a>();
   }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>    <a class="code" href="group__group__avr32__utils.html#ga83636765fdfe0f33f40ee5cf1debe108" title="Set value of system register.">sysreg_write</a>(AVR32_SR, flags);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    <a class="code" href="group__group__avr32__utils.html#ga53290ac2df2384738b8769c76622f803" title="Memory barrier.">barrier</a>();
}
</pre></div>
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__interrupt__group_ga428178bc346431936fddf52ad1ebd6fa_cgraph.gif" border="0" usemap="#group__interrupt__group_ga428178bc346431936fddf52ad1ebd6fa_cgraph" alt=""/></div>
<map name="group__interrupt__group_ga428178bc346431936fddf52ad1ebd6fa_cgraph" id="group__interrupt__group_ga428178bc346431936fddf52ad1ebd6fa_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5992cb015c55a0f4ed563e66a8793771"></a><!-- doxytag: member="interrupt_avr32.h::cpu_irq_save" ref="ga5992cb015c55a0f4ed563e66a8793771" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613">irqflags_t</a> cpu_irq_save </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get and clear the global interrupt flags. </p>
<p>Use in conjunction with <a class="el" href="group__interrupt__group.html#ga428178bc346431936fddf52ad1ebd6fa">cpu_irq_restore</a>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current state of interrupt flags.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This function leaves interrupts disabled. </dd></dl>

<p>Definition at line <a class="el" href="interrupt__avr32_8h_source.html#l00195">195</a> of file <a class="el" href="interrupt__avr32_8h_source.html">interrupt_avr32.h</a>.</p>

<p>References <a class="el" href="interrupt__avr32_8h_source.html#l00170">cpu_irq_disable</a>, and <a class="el" href="compiler_8h_source.html#l00146">sysreg_read</a>.</p>
<div class="fragment"><pre class="fragment">{
    <a class="code" href="group__interrupt__group.html#ga9aa1f52defc97531b6343233abeea613" title="Type used for holding state of interrupt flag.">irqflags_t</a> flags;

    flags = <a class="code" href="group__group__avr32__utils.html#ga5639b08e59ef64431bf29c03e260c22b" title="Get value of system register.">sysreg_read</a>(AVR32_SR);
    <a class="code" href="group__interrupt__group.html#ga7b77391ed86e2e027f9ee1dd99a06980" title="Disable interrupts globally.">cpu_irq_disable</a>();

    <span class="keywordflow">return</span> flags;
}
</pre></div>
</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 15 2011 13:05:48 for OS by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
